<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡† - L_B__</title><meta name="referrer" content="no-referrer">
<meta name="description" content="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><meta property="og:title" content="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" />
<meta property="og:description" content="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" /><meta property="og:image" content="https://acking-you.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-04-24T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://acking-you.github.io/logo.png"/>

<meta name="twitter:title" content="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"/>
<meta name="twitter:description" content="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"/>
<meta name="application-name" content="FeelIt">
<meta name="apple-mobile-web-app-title" content="FeelIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="canonical" href="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" /><link rel="prev" href="https://acking-you.github.io/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/" /><link rel="next" href="https://acking-you.github.io/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/acking-you.github.io\/posts\/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86\/"
        },"genre": "posts","keywords": "å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†","wordcount":  2978 ,
        "url": "https:\/\/acking-you.github.io\/posts\/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86\/","datePublished": "2022-04-24T00:00:00+00:00","dateModified": "2022-04-24T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "ä½œè€…"},"author": {
                "@type": "Person",
                "name": "ä½œè€…"
            },"description": "å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"
    }
    </script></head><body data-header-desktop="auto" data-header-mobile="auto"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="L_B__">L_B__</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="L_B__">L_B__</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><div class="menu-item"><a href="javascript:void(0);" class="theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="disable"><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://img-blog.csdnimg.cn/img_convert/526441b9fa37b831c54f8b76bf498cca.png#pic_center"
        data-srcset="https://img-blog.csdnimg.cn/img_convert/526441b9fa37b831c54f8b76bf498cca.png#pic_center, https://img-blog.csdnimg.cn/img_convert/526441b9fa37b831c54f8b76bf498cca.png#pic_center 1.5x, https://img-blog.csdnimg.cn/img_convert/526441b9fa37b831c54f8b76bf498cca.png#pic_center 2x"
        data-sizes="auto"
        alt="https://img-blog.csdnimg.cn/img_convert/526441b9fa37b831c54f8b76bf498cca.png#pic_center"
        title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" /></div><div class="single-card" data-image="true"><h2 class="single-title animated flipInX">å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>ä½œè€…</a></span>&nbsp;<span class="post-category">å‡ºç‰ˆäº  <a href="/categories/bug%E6%97%A5%E8%AE%B0c++%E5%AE%9E%E7%8E%B0qqui%E7%AF%87/"><i class="far fa-folder fa-fw"></i>(bugæ—¥è®°)C++å®ç°QQâ€”â€”UIç¯‡</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-04-24">2022-04-24</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2978 å­—</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 6 åˆ†é’Ÿ</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>ç›®å½•</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#é¡¹ç›®èƒŒæ™¯">é¡¹ç›®èƒŒæ™¯</a></li>
    <li><a href="#å®æ—¶qqå¥½å‹æœç´¢æ¡†å®ç°æ€è·¯">å®æ—¶QQå¥½å‹æœç´¢æ¡†å®ç°æ€è·¯</a>
      <ul>
        <li><a href="#å…·ä½“æ€è·¯">å…·ä½“æ€è·¯</a></li>
      </ul>
    </li>
    <li><a href="#å®è·µ">å®è·µ</a>
      <ul>
        <li><a href="#å®è·µä¸€é€šè¿‡ä¿å­˜ä¸€ä»½æ‹·è´æ‰‘è¡—bug">å®è·µä¸€ï¼šé€šè¿‡ä¿å­˜ä¸€ä»½æ‹·è´(æ‰‘è¡—bug)</a></li>
        <li><a href="#å®è·µäºŒé€šè¿‡å‰åç«¯åˆ†ç¦»æ™ºèƒ½æŒ‡é’ˆå®Œç¾è§£å†³">å®è·µäºŒï¼šé€šè¿‡å‰åç«¯åˆ†ç¦»+æ™ºèƒ½æŒ‡é’ˆå®Œç¾è§£å†³</a></li>
      </ul>
    </li>
    <li><a href="#é™„å½•">é™„å½•</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h2 id="é¡¹ç›®èƒŒæ™¯">é¡¹ç›®èƒŒæ™¯</h2>
<p>æƒ³è¦ç”¨çº¯C++å®ç°ä¸€ä¸ªQQï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯çš„uiå’Œé€šä¿¡ï¼Œä»¥åŠæœåŠ¡ç«¯çš„æ•°æ®æ”¶å‘é€šä¿¡ã€‚</p>
<p><strong>å®¢æˆ·ç«¯</strong>ï¼šä½¿ç”¨C++çš„Qtæ¡†æ¶å®ç°UIï¼ˆæ­£åœ¨è¿›è¡Œï¼‰ï¼Œä½¿ç”¨è‡ªå·±æ‰‹å†™çš„ç½‘ç»œæ¡†æ¶è¿›è¡Œé€šä¿¡ï¼ˆè¿˜æœªå¼€å§‹ï¼‰ï¼Œä»¥åŠæ‰‹å†™çš„bencodeç¼–ç è¿›æœ¬åœ°åºåˆ—åŒ–ï¼ˆå·²ç»å®Œæˆï¼‰ã€‚</p>
<p><strong>æœåŠ¡ç«¯</strong>ï¼šä½¿ç”¨è‡ªå·±é€ å¥½çš„ç½‘ç»œæ¡†æ¶è¿›è¡Œæ•°æ®çš„æ”¶å‘å’Œé€šä¿¡ï¼ˆè¿˜æœªå¼€å§‹ï¼‰ã€‚</p>
<p><strong>æœ¬ç¯‡è¿›åº¦</strong>ï¼šå·²ç»å®ç°äº†ç™»å½•ç•Œé¢å’ŒåŸºæœ¬çš„ä¸»ç•Œé¢ï¼Œæœ¬æ¬¡æ˜¯æƒ³æ‹“å±•ä¸€ä¸ªå®æ—¶çš„æœç´¢æ¡†ï¼Œç»“æœç¢°åˆ°äº†å‘ï¼Œç„¶ååœ¨æ­¤å†™ä¸‹è®°å½•ã€‚</p>
<p>ç›®å‰UIå®ç°æƒ…å†µå¦‚ä¸‹å›¾ï¼š</p>
<blockquote>
<p>ç™»å½•ç•Œé¢ï¼š</p>
</blockquote>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://img-blog.csdnimg.cn/63bd72e215da4cb8a3660f64175bb058.gif"
        data-srcset="https://img-blog.csdnimg.cn/63bd72e215da4cb8a3660f64175bb058.gif, https://img-blog.csdnimg.cn/63bd72e215da4cb8a3660f64175bb058.gif 1.5x, https://img-blog.csdnimg.cn/63bd72e215da4cb8a3660f64175bb058.gif 2x"
        data-sizes="auto"
        alt="https://img-blog.csdnimg.cn/63bd72e215da4cb8a3660f64175bb058.gif"
        title="ç™»å½•ç•Œé¢" /></p>
<blockquote>
<p>ä¸»ç•Œé¢ï¼š</p>
</blockquote>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://img-blog.csdnimg.cn/30906168548f49e4bc2e130f9b2db885.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQytH,size_20,color_FFFFFF,t_70,g_se,x_16"
        data-srcset="https://img-blog.csdnimg.cn/30906168548f49e4bc2e130f9b2db885.png?x-oss-process=image/watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBAQytH%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16, https://img-blog.csdnimg.cn/30906168548f49e4bc2e130f9b2db885.png?x-oss-process=image/watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBAQytH%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16 1.5x, https://img-blog.csdnimg.cn/30906168548f49e4bc2e130f9b2db885.png?x-oss-process=image/watermark%2ctype_d3F5LXplbmhlaQ%2cshadow_50%2ctext_Q1NETiBAQytH%2csize_20%2ccolor_FFFFFF%2ct_70%2cg_se%2cx_16 2x"
        data-sizes="auto"
        alt="https://img-blog.csdnimg.cn/30906168548f49e4bc2e130f9b2db885.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAQytH,size_20,color_FFFFFF,t_70,g_se,x_16"
        title="ä¸»ç•Œé¢" /></p>
<h2 id="å®æ—¶qqå¥½å‹æœç´¢æ¡†å®ç°æ€è·¯">å®æ—¶QQå¥½å‹æœç´¢æ¡†å®ç°æ€è·¯</h2>
<p>å®ç°ç›®æ ‡ï¼šå½“ç”¨æˆ·åœ¨æœç´¢æ¡†è¾“å…¥åå­—çš„æ—¶å€™ï¼Œä¼šå®æ—¶å°†å½“å‰åˆ—è¡¨å†…çš„åŒ…å«è¯¥åå­—çš„å¥½å‹ç»™åˆ—ä¸¾å‡ºæ¥ã€‚</p>
<p>å®ç°æ–¹å¼ï¼šé€šè¿‡è¿æ¥ä¿¡å· <code>QLineEdit::textChanged</code> æ¥å¯¹åº”ç”¨æˆ·æŒ‰é’®çš„å­˜å‚¨æ§ä»¶ä¸­çš„æ§½å‡½æ•°ã€‚</p>
<h3 id="å…·ä½“æ€è·¯">å…·ä½“æ€è·¯</h3>
<p>ç”±äºæˆ‘æ˜¯é€šè¿‡ <code>QListWidget</code> å­˜ä¸‹å¤šä¸ªè‡ªå·±é‡å†™çš„ <code>QPushButton</code> æ¥å®ç°å¥½å‹åˆ—è¡¨ï¼Œæ•…æƒ³è¦è¿›è¡Œåˆ—è¡¨ä¸­çš„åˆ é™¤å’Œå¢åŠ å°±æ˜¯å¯¹ <code>QListWidget</code> å¢åŠ æˆ–åˆ é™¤ <code>QListWidgetItem</code> ã€‚ç”±äº <code>QListWidget</code> åªæä¾›äº† <code>QListWidget::addItem</code> æ–¹æ³•è¿›è¡Œæ·»åŠ ï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½ä¿è¯åœ¨å…·ä½“å“ªä¸€è¡Œæ’å…¥ï¼Œåªä¼šåœ¨åˆ—è¡¨çš„å°¾éƒ¨è¿›è¡Œæ·»åŠ ï¼Œæ‰€ä»¥æˆ‘é€šè¿‡è¿™æ ·ä¸€ä¸ªæ–¹æ³•å®ç°å®æ—¶çš„åˆ—è¡¨æœç´¢é¡¹ï¼š<strong>æ¸…ç©ºå†é‡æ–°åˆ›å»ºç¬¦åˆæ¡ä»¶çš„ <code>QPushButton</code></strong>ã€‚</p>
<h2 id="å®è·µ">å®è·µ</h2>
<h3 id="å®è·µä¸€é€šè¿‡ä¿å­˜ä¸€ä»½æ‹·è´æ‰‘è¡—bug">å®è·µä¸€ï¼šé€šè¿‡ä¿å­˜ä¸€ä»½æ‹·è´(æ‰‘è¡—bug)</h3>
<p>æ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘å¾ˆå¿«æƒ³åˆ°ï¼Œéœ€è¦<strong>ä¿å­˜å¥½æœç´¢å‰çš„æ‰€æœ‰åˆ—è¡¨é¡¹</strong>ï¼Œç„¶åå†é€šè¿‡ç”¨æˆ·è¾“å…¥çš„æ–‡å­—ç­›é€‰ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„åˆ—è¡¨é¡¹æ·»åŠ è¿›å»ã€‚</p>
<p>è¿™æ ·å¾ˆå¿«å°±å‡ºç°äº†é—®é¢˜ï¼šç”±äº<strong>æ¸…ç©ºåˆ—è¡¨ä¼šå¯¼è‡´åˆ—è¡¨é¡¹é‡Œé¢çš„æ‰€æœ‰å†…å­˜éƒ½è¢«ææ„</strong>ï¼æ‰€ä»¥å¦‚æœä½ å»æŒ‰ç…§è¿™æ ·ä¸€ä¸ªæ€è·¯å»å®ç°ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨ <code>addUserBtn</code> æ·»åŠ ç”¨æˆ·æŒ‰é’®çš„æ—¶å€™å­˜ä¸‹ä¸€ä»½æ‹·è´ï¼Œç„¶åä½ æŠŠåˆ—è¡¨æ¸…ç©ºåå†…å­˜ææ„ä¹Ÿä¸€ç›´èƒ½ç”¨è¿™ä¸€ä»½æ‹·è´å†ç”Ÿæˆæ–°çš„æ‹·è´æŒ‰é’®æ¥æ·»åŠ åˆ°åˆ—è¡¨ä¸­å»ï¼Œè¿™æ ·é—®é¢˜åº”è¯¥å°±è§£å†³äº†ã€‚</p>
<p>ç„¶åæˆ‘é©¬ä¸åœè¹„çš„é©¬ä¸Šå†™å¥½äº†ä»£ç ï¼Œè·‘èµ·æ¥å‡†å¤‡æµ‹è¯•ï¼Œç«‹é©¬å‡ºç°æ–°çš„é—®é¢˜ï¼šæ¯æ¬¡è¾“å…¥æ—¶ç¡®å®ä¼šæ˜¾ç¤ºå¯¹åº”çš„ç”¨æˆ·æŒ‰é’®æ˜¯æ²¡é”™ï¼Œä½†å›¾ç‰‡éƒ½æ²¡äº†ï¼Œç”šè‡³å¾ˆå¤šæŒ‰é’®æ˜¯ç©ºçš„ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ç»è¿‡æ³¨æ„æ’æŸ¥ï¼Œå‘ç°æ˜¯æˆ‘å†™æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™æŠŠå¾ˆå¤š <code>QString</code> æˆå‘˜è½¬äº†å³å€¼ç”¨äº†ç§»åŠ¨æ„é€ ï¼Œæ‰€ä»¥æ¯æ¬¡å‘é€æ‹·è´æ—¶ï¼Œå®é™…ä¸Šèµ„æºå·²ç»è½¬ç§»äº†ã€‚ã€‚ã€‚</p>
<p>æ”¹å¥½è¿™ä¸ªbugï¼Œåˆç»§ç»­æµ‹è¯•ï¼Œç„¶åæœä¸å…¶ç„¶ï¼Œåˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼šç”¨æˆ·è¾“å…¥çš„æ—¶å€™ä¼šæœ‰ç¬¦åˆæ¡ä»¶çš„é¡¹è¢«åˆ›å»ºæ²¡é”™ï¼Œä¸”éƒ½æœ‰å¯¹åº”çš„æ•°æ®ï¼Œä½†æ˜¯éšç€ç»§ç»­è¾“å…¥åˆ›å»ºçš„å¯¹è±¡æ˜¯è¶Šæ¥è¶Šå¤šäº†ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>åˆç»è¿‡ä»”ç»†æ’æŸ¥ï¼Œå‘ç°æ˜¯å› ä¸ºæ¯æ¬¡ <code>addUserBtn</code> çš„æ—¶å€™éƒ½ä¼šæŠŠå¯¹åº”çš„æ•°æ®æ·»åŠ ä¸€ä»½æ‹·è´åˆ°ç¼“å­˜ï¼Œä½†æ˜¯å¦‚æœæ˜¯ç”¨æˆ·åœ¨è¾“å…¥æ¡†ç«‹é©¬è¾“å…¥ä¿¡æ¯è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œè°ƒç”¨äº†è¿™ä¸ªaddå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šä¸æ–­çš„æ·»åŠ é‡å¤çš„ä¿¡æ¯åˆ°ç¼“å­˜ä¸­å»ï¼ï¼ï¼</p>
<p>æ­¤æ—¶å¾ˆå¤šäººå¯èƒ½ä¼šæƒ³ç€ç”¨ <code>set</code> æ›¿ä»£ <code>list</code> åšç¼“å­˜ï¼Œä½†æ˜¯æˆ‘å°±æ­¤å‘ç°äº†æˆ‘è¿™ä¸ªå®ç°æ€è·¯å°±å¾ˆæœ‰é—®é¢˜ï¼š</p>
<p>ä¸€ã€æ¯æ¬¡é‡æ–°æ·»åŠ æ§ä»¶éœ€è¦æŠŠæ•´ä¸ªä¿¡æ¯å…¨æ‹·è´ä¸€éï¼Œå¦‚æœæ•°æ®å¤šäº†ä¼šæ˜¯ä¸€ä¸ªå¾ˆè€—æ—¶çš„å·¥ä½œï¼</p>
<p>äºŒã€æˆ‘å‘ç°äº†ç½ªæ¶ä¹‹æºï¼š<code>QListWidget</code> æŠŠæ§ä»¶çš„ç”Ÿå‘½å‘¨æœŸç‰¢ç‰¢æŠŠæ¡ï¼ï¼ï¼è¦ä¸æ˜¯æ¯æ¬¡åˆ é™¤æ§ä»¶éƒ½å¾—æŠŠç«‹é©¬çš„ä¸œè¥¿ææ„æ‰èƒ½è®©è¿™ä¸ªæ§ä»¶ä¸æ˜¾ç¤ºï¼Œæ‰ä¸ä¼šå‡ºç°è¿™ç­‰é—®é¢˜ï¼ä¹Ÿæ‰ä¸ä¼šéœ€è¦é‡å¤ä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼</p>
<h3 id="å®è·µäºŒé€šè¿‡å‰åç«¯åˆ†ç¦»æ™ºèƒ½æŒ‡é’ˆå®Œç¾è§£å†³">å®è·µäºŒï¼šé€šè¿‡å‰åç«¯åˆ†ç¦»+æ™ºèƒ½æŒ‡é’ˆå®Œç¾è§£å†³</h3>
<p>è¿™æ¬¡æ¨å€’é‡æ¥ï¼Œå‰é¢çš„è¯•æ¢ä¹Ÿå¹¶éæ˜¯åœ¨åšæ— ç”¨åŠŸï¼Œè‡³å°‘é€šè¿‡å‰é¢çš„å®è·µå‘ç°ï¼Œæ—¢ç„¶æˆ‘ä»¬æ²¡æ³•æŠŠ <code>Button</code> çš„ç”Ÿå‘½å‘¨æœŸæ‹¿åœ¨æ‰‹é‡Œï¼ˆæ¯æ¬¡è¿˜æ˜¯éœ€è¦é‡æ–°newå‡ºæ–°çš„Buttonï¼‰ï¼Œä½†æˆ‘ä»¬è‡³å°‘æŠŠ <code>Button</code> é‡Œæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸæ‹¿åœ¨æ‰‹é‡Œå•Šï¼Œæˆ‘ä»¬åˆ©ç”¨<strong>æ•°æ®å’Œç•Œé¢åˆ†ç¦»çš„æ€æƒ³</strong>ï¼Œå°†æ•°æ®ä»¥ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆçš„æ–¹å¼ä¿å­˜åœ¨ <code>Button</code> å†…éƒ¨ï¼Œè¿™æ ·ä¸€æ¥æŒ‰é’®è¢«ææ„ï¼Œæ•°æ®ä¹Ÿä¸ä¸€å®šå°±ä¼šè¢«ææ„ï¼Œåªæœ‰å½“æ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™æ‰è¢«ææ„ã€‚</p>
<p>æ‰€ä»¥å›åˆ°å‰é¢çš„å®è·µä¸€ï¼Œè¿™æ¬¡æˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸€ä¸ªç¼“å­˜å­˜ä¸‹åŸæœ¬çš„æ•°æ®ï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬å­˜å‚¨çš„ä¸æ˜¯ <code>Button</code> å¯¹è±¡ï¼Œè€Œæ˜¯ <code>Button</code> å¯¹è±¡ä¸­çš„æ™ºèƒ½æŒ‡é’ˆæ•°æ®ï¼Œæ‰€ä»¥åªè¦ç¼“å­˜è¿˜å­˜åœ¨ï¼Œé‚£ä¹ˆ <code>Button</code> é‡Œé¢çš„æ•°æ®å°±è¿˜æ˜¯å¯ä»¥å¤ç”¨çš„ï¼æ‰€ä»¥æ¯æ¬¡ new å‡ºæ–°çš„ Button å»æ˜¾ç¤ºçš„ä»£ä»·æ˜¯å¾ˆå°çš„ ï¼Œå› ä¸ºæŒ‡é’ˆçš„copyå‡ ä¹æ˜¯æ²¡æœ‰ä»£ä»·çš„ã€‚ã€‚ã€‚</p>
<p>è€Œä¸”å¦‚æœç”¨setå­˜å‚¨æŒ‡é’ˆçš„è¯ï¼Œç›´æ¥é€šè¿‡åˆ¤æ–­åœ°å€å°±èƒ½æ¸…æ¥šæ˜¯å¦æ˜¯ç›¸åŒçš„æ•°æ®äº†ï¼è¿™æ ·çš„å­˜å‚¨æ€§èƒ½ä¼šæ¯”ç›´æ¥å­˜ä¸‹æ•°æ®è¦é«˜å¾ˆå¤šã€‚</p>
<p>åƒè¿™æ ·<strong>æŠŠæ•°æ®å’Œç•Œé¢åˆ†ç¦»å¼€çš„æ€è·¯ï¼Œæˆ‘è§‰å¾—å°±å’Œwebç«¯çš„å‰åç«¯åˆ†ç¦»çš„æ€è·¯æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘æ„¿æ„ç§°ä¹‹ä¸ºæ¡Œé¢ç«¯çš„å‰åç«¯åˆ†ç¦»</strong>ã€‚</p>
<h2 id="é™„å½•">é™„å½•</h2>
<p>æœ€åæˆ‘è´´ä¸Šæˆ‘å…·ä½“å®ç°çš„ä»£ç ï¼š</p>
<p>èƒ½çœ‹æ‡‚çš„åº”è¯¥ä¼šæœ‰æ”¶è·ï¼Œçœ‹ä¸æ‡‚ä»¥åæ€»ä¼šçœ‹å¾—æ‡‚ğŸ˜</p>
<blockquote>
<p>UserButton.h</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="k">class</span> <span class="nc">UserButton</span> <span class="o">:</span><span class="k">public</span> <span class="n">QPushButton</span><span class="p">{</span>
    <span class="n">Q_OBJECT</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">UserButton</span><span class="p">(</span><span class="n">QWidget</span><span class="o">*</span><span class="n">parent</span><span class="p">);</span>
<span class="k">public</span><span class="o">:</span>
    
    <span class="c1">//æŒ‰é’®çš„ç±»å‹
</span><span class="c1"></span>    <span class="k">enum</span> <span class="k">class</span> <span class="nc">Type</span><span class="p">{</span>
        <span class="n">Meg_Btn</span><span class="p">,</span>
        <span class="n">User_Btn</span>
    <span class="p">};</span>

    <span class="c1">//å­˜å‚¨æŒ‰é’®æ•°æ®çš„ç±»å‹
</span><span class="c1"></span>    <span class="k">struct</span> <span class="nc">ButtonInfo</span><span class="p">{</span>
        <span class="kt">int</span> <span class="n">_unread</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">_hide</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">_uid</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">State</span> <span class="n">_state</span> <span class="o">=</span> <span class="n">State</span><span class="o">::</span><span class="n">OffLine</span><span class="p">;</span>
        <span class="n">Type</span> <span class="n">_type</span> <span class="o">=</span> <span class="n">Type</span><span class="o">::</span><span class="n">Meg_Btn</span><span class="p">;</span>
        <span class="n">QString</span> <span class="n">_iconPath</span><span class="p">;</span>
        <span class="n">QString</span> <span class="n">_name</span><span class="p">;</span>
        <span class="n">QString</span> <span class="n">_text</span><span class="p">;</span>
        <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ButtonInfo</span><span class="o">&gt;</span> <span class="n">getDefaultButtonInfo</span><span class="p">(</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span><span class="n">name</span><span class="p">,</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span><span class="n">text</span><span class="p">,</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span><span class="n">iconPath</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">using</span> <span class="n">shared_info</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ButtonInfo</span><span class="o">&gt;</span><span class="p">;</span>

    <span class="c1">//æ ¹æ®å¤–ç•Œæ•°æ®åˆ›å»ºæŒ‰é’®
</span><span class="c1"></span>    <span class="k">static</span> <span class="n">UserButton</span><span class="o">*</span> <span class="nf">fromButtonInfo</span><span class="p">(</span><span class="n">shared_info</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">info</span><span class="p">,</span><span class="n">QWidget</span><span class="o">*</span> <span class="n">parent</span><span class="o">=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="cm">/**
</span><span class="cm">     * æŒä¹…åŒ–æˆåŠŸè¿”å›å­˜å‚¨çš„è·¯å¾„ï¼Œå¦åˆ™è¿”å›ç©ºoptional
</span><span class="cm">     * @param imageSrc
</span><span class="cm">     * @param name
</span><span class="cm">     * @return
</span><span class="cm">     */</span>
   <span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">QString</span><span class="o">&gt;</span> <span class="n">StorageIcon</span><span class="p">(</span><span class="n">QByteArray</span> <span class="k">const</span><span class="o">&amp;</span><span class="n">imageSrc</span><span class="p">,</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">);</span>

   
    <span class="o">~</span><span class="n">UserButton</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span>

<span class="k">protected</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>

    
<span class="k">public</span><span class="o">:</span>
    <span class="c1">//ç”»å‡ºMessageæŒ‰é’®
</span><span class="c1"></span>    <span class="kt">void</span> <span class="n">PainMessageBtn</span><span class="p">();</span>
	<span class="c1">//ç”»å‡ºUseræŒ‰é’®
</span><span class="c1"></span>    <span class="kt">void</span> <span class="nf">PainUserBtn</span><span class="p">();</span>

    <span class="n">QRect</span> <span class="nf">adjustSize</span><span class="p">(</span><span class="n">QString</span><span class="o">&amp;</span><span class="n">dest</span><span class="p">);</span>

    <span class="c1">//ä¸€å¤§å †getterå’Œsetter
</span><span class="c1"></span>    <span class="n">QString</span> <span class="nf">getName</span><span class="p">();</span>
    
    <span class="kt">void</span> <span class="nf">setName</span><span class="p">(</span><span class="n">QString</span> <span class="n">name</span><span class="p">);</span>

    <span class="kt">int</span> <span class="nf">getNumUnread</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">setNumUnread</span><span class="p">(</span><span class="kt">int</span> <span class="n">numUnread</span><span class="p">);</span>

    <span class="n">State</span> <span class="nf">getMState</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">setMState</span><span class="p">(</span><span class="n">State</span> <span class="n">mState</span><span class="p">);</span>

    <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">getMIconPath</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">setMIconPath</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">mIconPath</span><span class="p">);</span>

    <span class="n">Type</span> <span class="nf">getMType</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="kt">void</span> <span class="nf">setMType</span><span class="p">(</span><span class="n">Type</span> <span class="n">mType</span><span class="p">);</span>

    <span class="kt">void</span> <span class="nf">setHideMsgStyle</span><span class="p">(</span><span class="kt">bool</span> <span class="n">isHide</span><span class="p">);</span>

    <span class="kt">int</span> <span class="nf">getMisHide</span><span class="p">();</span>
    
    <span class="kt">int</span> <span class="nf">getUid</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
    
    <span class="kt">void</span> <span class="nf">setUid</span><span class="p">(</span><span class="kt">int</span> <span class="n">uid</span><span class="p">);</span>

    <span class="kt">void</span> <span class="nf">setContent</span><span class="p">(</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">text</span><span class="p">);</span>

    <span class="n">QString</span> <span class="nf">getContent</span><span class="p">();</span>

    <span class="n">shared_info</span> <span class="nf">getSharedInfo</span><span class="p">();</span>
<span class="k">public</span> <span class="nl">slots</span><span class="p">:</span>
    <span class="c1">//ç”¨äºå¤–ç•Œå®æ—¶æ›´æ–°æ¶ˆæ¯æ¡†çš„æ˜¾ç¤ºå†…å®¹çš„æ§½å‡½æ•°
</span><span class="c1"></span>    <span class="kt">void</span> <span class="n">updateContent</span><span class="p">(</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">text</span><span class="p">);</span>


<span class="k">private</span><span class="o">:</span>
    <span class="c1">//æ•°æ®
</span><span class="c1"></span>    <span class="n">shared_info</span> <span class="n">m_info_</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div><blockquote>
<p>UserButton.cpp</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">//
</span><span class="c1">// Created by Alone on 2022-4-18.
</span><span class="c1">//
</span><span class="c1"></span>
<span class="cp">#include</span> <span class="cpf">&#34;UserButton.h&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;QFile&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;QByteArray&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;utility&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;QDir&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;config_path.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;QPainter&gt;</span><span class="cp">
</span><span class="cp"></span>


<span class="c1">//æ–¹ä¾¿è¿›è¡Œæµ‹è¯•çš„ä¿¡shared_infoå¿«é€Ÿåˆ›å»º
</span><span class="c1"></span><span class="n">UserButton</span><span class="o">::</span><span class="n">shared_info</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">ButtonInfo</span><span class="o">::</span><span class="n">getDefaultButtonInfo</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">,</span>
                                                                                     <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">,</span>
                                                                                     <span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">iconPath</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">auto</span><span class="o">*</span> <span class="n">src</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">ButtonInfo</span><span class="p">;</span>
    <span class="n">src</span><span class="o">-&gt;</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="n">src</span><span class="o">-&gt;</span><span class="n">_text</span> <span class="o">=</span> <span class="n">text</span><span class="p">;</span>
    <span class="n">src</span><span class="o">-&gt;</span><span class="n">_iconPath</span> <span class="o">=</span> <span class="n">iconPath</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">UserButton</span><span class="o">::</span><span class="n">ButtonInfo</span><span class="o">&gt;</span><span class="p">(</span><span class="n">src</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//qssæ ·å¼
</span><span class="c1"></span><span class="kr">inline</span> <span class="n">QString</span> <span class="nf">My_StyleSheet</span><span class="p">(</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">icon_path</span><span class="p">){</span>
        <span class="k">return</span>
        <span class="n">QString</span><span class="p">(</span><span class="n">R</span><span class="s">&#34;(</span>
<span class="n">QPushButton</span><span class="p">{</span>
<span class="nl">border</span><span class="p">:</span><span class="n">none</span><span class="p">;</span>
    <span class="nl">image</span><span class="p">:</span> <span class="n">url</span><span class="p">(</span><span class="o">%</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">image</span><span class="o">-</span><span class="nl">position</span><span class="p">:</span><span class="n">left</span><span class="p">;</span>
    <span class="n">min</span><span class="o">-</span><span class="nl">width</span><span class="p">:</span><span class="mi">120</span><span class="n">px</span><span class="p">;</span>
    <span class="n">padding</span><span class="o">-</span><span class="nl">top</span><span class="p">:</span><span class="mi">7</span><span class="n">px</span><span class="p">;</span>
    <span class="n">padding</span><span class="o">-</span><span class="nl">left</span><span class="p">:</span><span class="mi">10</span><span class="n">px</span><span class="p">;</span>
    <span class="n">padding</span><span class="o">-</span><span class="nl">bottom</span><span class="p">:</span><span class="mi">7</span><span class="n">px</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span><span class="n">rgb</span><span class="p">(</span><span class="mi">248</span><span class="p">,</span> <span class="mi">249</span><span class="p">,</span> <span class="mi">249</span><span class="p">);</span>
<span class="p">}</span>
<span class="nl">QPushButton</span><span class="p">:</span><span class="n">hover</span><span class="p">{</span>
<span class="nl">border</span><span class="p">:</span><span class="n">none</span><span class="p">;</span>
 <span class="nl">background</span><span class="p">:</span><span class="n">rgb</span><span class="p">(</span><span class="mi">242</span><span class="p">,</span> <span class="mi">242</span><span class="p">,</span> <span class="mi">242</span><span class="p">);</span>
<span class="p">}</span>
<span class="nl">QPushButton</span><span class="p">:</span><span class="n">checked</span><span class="p">{</span>
<span class="nl">border</span><span class="p">:</span><span class="n">none</span><span class="p">;</span>
<span class="nl">background</span><span class="p">:</span><span class="n">rgb</span><span class="p">(</span><span class="mi">235</span><span class="p">,</span> <span class="mi">235</span><span class="p">,</span> <span class="mi">235</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">)</span><span class="s">&#34;).arg(icon_path);</span>
<span class="p">}</span>

<span class="n">UserButton</span><span class="o">::</span><span class="n">UserButton</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span><span class="o">:</span> <span class="n">QPushButton</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">setCheckable</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
    <span class="n">setAutoExclusive</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">UserButton</span><span class="o">::~</span><span class="n">UserButton</span><span class="p">()</span> <span class="p">{</span>

<span class="p">}</span>

<span class="n">UserButton</span><span class="o">*</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">fromButtonInfo</span><span class="p">(</span><span class="n">shared_info</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">info</span><span class="p">,</span><span class="n">QWidget</span><span class="o">*</span> <span class="n">parent</span><span class="p">){</span>
    <span class="k">auto</span><span class="o">*</span> <span class="n">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UserButton</span><span class="p">(</span><span class="n">parent</span><span class="p">);</span>
    <span class="n">btn</span><span class="o">-&gt;</span><span class="n">m_info_</span> <span class="o">=</span> <span class="n">info</span><span class="p">;</span>
    <span class="n">btn</span><span class="o">-&gt;</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="n">My_StyleSheet</span><span class="p">(</span><span class="n">btn</span><span class="o">-&gt;</span><span class="n">getMIconPath</span><span class="p">()));</span>
    <span class="k">return</span> <span class="n">btn</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//è°ƒæ•´å†…å®¹æ˜¾ç¤º
</span><span class="c1"></span><span class="n">QRect</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">adjustSize</span><span class="p">(</span><span class="n">QString</span> <span class="o">&amp;</span><span class="n">dest</span><span class="p">){</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>
    <span class="c1">// ä¸‰æ¡£è°ƒèŠ‚
</span><span class="c1"></span>    <span class="kt">int</span> <span class="n">num_width</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">span</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">){</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span><span class="p">);</span>
        <span class="n">num_width</span> <span class="o">=</span> <span class="n">span</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span><span class="o">&lt;</span><span class="mi">99</span><span class="p">){</span>
        <span class="n">dest</span> <span class="o">=</span> <span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span><span class="p">);</span>
        <span class="n">num_width</span> <span class="o">=</span> <span class="n">span</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">dest</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#34;99+&#34;</span><span class="p">);</span>
        <span class="n">num_width</span> <span class="o">=</span> <span class="n">span</span><span class="o">*</span><span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="n">num_width</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="n">num_width</span><span class="p">,</span><span class="mi">13</span><span class="p">};</span>
<span class="p">}</span>

<span class="c1">//æ ¹æ®ä¸åŒçš„æŒ‰é’®è¿›è¡Œä¸åŒçš„ç»˜åˆ¶
</span><span class="c1"></span><span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="n">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="n">QPushButton</span><span class="o">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">Type</span><span class="o">::</span><span class="nl">User_Btn</span><span class="p">:</span>
            <span class="n">PainUserBtn</span><span class="p">();</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">Type</span><span class="o">::</span><span class="nl">Meg_Btn</span><span class="p">:</span>
            <span class="n">PainMessageBtn</span><span class="p">();</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="c1">//æŒä¹…åŒ–äºŒè¿›åˆ¶æ•°æ®åˆ°æœ¬åœ°(ä¸»è¦æ˜¯å›¾ç‰‡)
</span><span class="c1"></span><span class="n">std</span><span class="o">::</span><span class="n">optional</span><span class="o">&lt;</span><span class="n">QString</span><span class="o">&gt;</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">StorageIcon</span><span class="p">(</span><span class="n">QByteArray</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">imageSrc</span><span class="p">,</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">QString</span> <span class="n">base_path</span> <span class="o">=</span> <span class="n">QDir</span><span class="o">::</span><span class="n">homePath</span><span class="p">()</span><span class="o">+</span><span class="n">DirName_Base</span><span class="p">;</span>
    <span class="n">QString</span> <span class="n">user_icon_path</span> <span class="o">=</span> <span class="n">base_path</span> <span class="o">+</span><span class="n">DirName_Icon</span><span class="p">;</span>
    <span class="c1">//å¦‚æœä¸¤çº§æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»ºæ–‡ä»¶å¤¹
</span><span class="c1"></span>    <span class="n">QDir</span> <span class="nf">dir</span><span class="p">(</span><span class="n">base_path</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">dir</span><span class="p">.</span><span class="n">exists</span><span class="p">()){</span>
        <span class="n">qDebug</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&#34;base_dir not exists,being created&#34;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">dir</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">base_path</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span> <span class="p">{};</span>
    <span class="p">}</span>
    <span class="n">dir</span><span class="p">.</span><span class="n">setPath</span><span class="p">(</span><span class="n">user_icon_path</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">dir</span><span class="p">.</span><span class="n">exists</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="n">qDebug</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="s">&#34;icon_dir not exists,being created&#34;</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">dir</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">user_icon_path</span><span class="p">))</span>
            <span class="k">return</span> <span class="p">{};</span>
    <span class="p">}</span>
    <span class="c1">//å¼€å§‹å†™å…¥æœ¬åœ°æŒä¹…åŒ–
</span><span class="c1"></span>    <span class="n">QString</span> <span class="n">user_icon</span> <span class="o">=</span> <span class="n">user_icon_path</span><span class="o">+</span><span class="s">&#34;/&#34;</span><span class="o">+</span><span class="n">name</span><span class="p">;</span>
    <span class="n">qDebug</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">user_icon</span><span class="p">;</span>
    <span class="n">QFile</span> <span class="nf">file</span><span class="p">(</span><span class="n">user_icon</span><span class="p">);</span>
    <span class="n">file</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">QIODevice</span><span class="o">::</span><span class="n">WriteOnly</span><span class="p">);</span>
    <span class="n">file</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">imageSrc</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">user_icon</span><span class="p">;</span>
<span class="p">}</span>


<span class="n">QString</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getName</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_name</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setName</span><span class="p">(</span><span class="n">QString</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>
    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_name</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getNumUnread</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setNumUnread</span><span class="p">(</span><span class="kt">int</span> <span class="n">numUnread</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>
    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span> <span class="o">=</span> <span class="n">numUnread</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">State</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getMState</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_state</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setMState</span><span class="p">(</span><span class="n">State</span> <span class="n">mState</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_state</span> <span class="o">=</span> <span class="n">mState</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">UserButton</span><span class="o">::</span><span class="n">getMIconPath</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_iconPath</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setMIconPath</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">mIconPath</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_iconPath</span> <span class="o">=</span> <span class="n">mIconPath</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">UserButton</span><span class="o">::</span><span class="n">Type</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getMType</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_type</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setMType</span><span class="p">(</span><span class="n">UserButton</span><span class="o">::</span><span class="n">Type</span> <span class="n">mType</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_type</span> <span class="o">=</span> <span class="n">mType</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setHideMsgStyle</span><span class="p">(</span><span class="kt">bool</span> <span class="n">isHide</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_hide</span> <span class="o">=</span> <span class="n">isHide</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getUid</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_uid</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setUid</span><span class="p">(</span><span class="kt">int</span> <span class="n">uid</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span> <span class="k">nullptr</span><span class="p">);</span>

    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">setContent</span><span class="p">(</span><span class="k">const</span> <span class="n">QString</span> <span class="o">&amp;</span><span class="n">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_text</span> <span class="o">=</span> <span class="n">text</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">QString</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getContent</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_text</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getMisHide</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">m_info_</span><span class="o">!=</span><span class="k">nullptr</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_hide</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">UserButton</span><span class="o">::</span><span class="n">shared_info</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">getSharedInfo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">m_info_</span><span class="p">;</span>
<span class="p">}</span>



<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">PainMessageBtn</span><span class="p">()</span> <span class="p">{</span>

    <span class="n">QPainter</span> <span class="nf">painter</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setRenderHints</span><span class="p">(</span><span class="n">QPainter</span><span class="o">::</span><span class="n">Antialiasing</span> <span class="o">|</span> <span class="n">QPainter</span><span class="o">::</span><span class="n">SmoothPixmapTransform</span><span class="p">);</span><span class="c1">//æ¶ˆé”¯é½¿
</span><span class="c1"></span>    <span class="n">QRect</span> <span class="nf">pos_round</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">);</span>
    <span class="n">QRect</span> <span class="nf">pos_time</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">50</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">10</span><span class="p">);</span>
    <span class="n">QRect</span> <span class="nf">pos_name</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">pos_time</span><span class="p">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">28</span><span class="p">);</span>
    <span class="n">QRect</span> <span class="nf">pos_content</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">pos_time</span><span class="p">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">15</span><span class="p">);</span>
    <span class="n">QColor</span> <span class="nf">color_time</span><span class="p">(</span><span class="mi">134</span><span class="p">,</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">152</span><span class="p">);</span>
    <span class="n">QFont</span> <span class="nf">font_time</span><span class="p">(</span><span class="s">&#34;å¾®è½¯é›…é»‘&#34;</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
    <span class="n">QString</span> <span class="n">time_cur</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">::</span><span class="n">currentDateTime</span><span class="p">().</span><span class="n">toString</span><span class="p">(</span><span class="s">&#34;hh:mm&#34;</span><span class="p">);</span>

    <span class="n">QString</span> <span class="n">m_name</span> <span class="o">=</span> <span class="n">getName</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_name</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">()){</span>
        <span class="c1">//ç”»åå­—
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">max_size</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
        <span class="n">QPen</span> <span class="n">pen</span><span class="p">;</span>
        <span class="n">pen</span><span class="p">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">26</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span><span class="s">&#34;å¾®è½¯é›…é»‘&#34;</span><span class="p">,</span><span class="mi">14</span><span class="p">));</span>
        <span class="n">QString</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">name</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">max_size</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m_name</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;</span><span class="n">max_size</span><span class="p">){</span>
            <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">m_name</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">m_name</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">max_size</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
            <span class="n">name</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#34;...&#34;</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">m_name</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">pos_name</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">QTextOption</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignLeft</span><span class="p">));</span>

        <span class="c1">//ç”»å†…å®¹
</span><span class="c1"></span>        <span class="n">max_size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
        <span class="n">pen</span><span class="p">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">164</span><span class="p">,</span> <span class="mi">176</span><span class="p">,</span> <span class="mi">190</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span><span class="s">&#34;å¾®è½¯é›…é»‘&#34;</span><span class="p">,</span><span class="mi">10</span><span class="p">));</span>
        <span class="n">QString</span> <span class="n">content</span><span class="p">;</span>
        <span class="n">content</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">max_size</span><span class="p">);</span>
        <span class="n">QString</span> <span class="n">m_Content</span> <span class="o">=</span> <span class="n">getContent</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m_Content</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;</span><span class="n">max_size</span><span class="p">){</span>
            <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">m_Content</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">m_Content</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">max_size</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">content</span><span class="p">));</span>
            <span class="n">content</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#34;...&#34;</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">m_Content</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">pos_content</span><span class="p">,</span><span class="n">content</span><span class="p">,</span><span class="n">QTextOption</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AlignVCenter</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">//ç”»å³è¾¹çš„æç¤ºæ¶ˆæ¯ï¼Œä»¥åŠå¯¹åº”é¢œè‰²æç¤ºå°çƒ
</span><span class="c1"></span>    <span class="n">State</span> <span class="n">m_state</span> <span class="o">=</span> <span class="n">getMState</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">m_isHide</span> <span class="o">=</span> <span class="n">getMisHide</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="n">m_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">::</span><span class="n">MegTip</span><span class="p">){</span>
        <span class="c1">//TODO æ³¨æ„æ ¹æ®æœªè¯»æ¶ˆæ¯çš„å¤šå°‘è°ƒæ•´åŒºåŸŸçš„å¤§å°
</span><span class="c1"></span>        <span class="n">QString</span> <span class="n">text_unreadNum</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_unread</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span>
            <span class="n">pos_round</span> <span class="o">=</span> <span class="n">adjustSize</span><span class="p">(</span><span class="n">text_unreadNum</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">QColor</span> <span class="nf">color_tmp</span><span class="p">(</span><span class="mi">246</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">49</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QBrush</span><span class="p">(</span><span class="n">color_tmp</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">NoPen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">pos_round</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>

        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">text_unreadNum</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">()){</span>
            <span class="c1">//ç”»æœªè¯»ä¿¡æ¯æ•°ç›®
</span><span class="c1"></span>            <span class="n">QPen</span> <span class="nf">pen</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
            <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">);</span>
            <span class="n">painter</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span><span class="s">&#34;å¾®è½¯é›…é»‘&#34;</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">550</span><span class="p">));</span>
            <span class="n">painter</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">pos_round</span><span class="p">,</span><span class="n">text_unreadNum</span><span class="p">,</span><span class="n">QTextOption</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignHCenter</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AlignVCenter</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">m_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">::</span><span class="n">OffLine</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">m_isHide</span><span class="p">){</span>
        <span class="n">QColor</span> <span class="n">color_tmp</span><span class="p">(</span><span class="mi">186</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">180</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QBrush</span><span class="p">(</span><span class="n">color_tmp</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">NoPen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">pos_round</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">m_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">::</span><span class="n">OnLine</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">m_isHide</span><span class="p">){</span>
        <span class="n">QColor</span> <span class="n">color_tmp</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">209</span><span class="p">,</span> <span class="mi">102</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QBrush</span><span class="p">(</span><span class="n">color_tmp</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">NoPen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">pos_round</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//ç”»æ—¶é—´
</span><span class="c1"></span>    <span class="n">QPen</span> <span class="nf">pen</span><span class="p">(</span><span class="n">color_time</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">);</span>
    <span class="n">QTextOption</span> <span class="nf">option</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignRight</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AlignVCenter</span><span class="p">);</span>
    <span class="n">option</span><span class="p">.</span><span class="n">setWrapMode</span><span class="p">(</span><span class="n">QTextOption</span><span class="o">::</span><span class="n">WrapAtWordBoundaryOrAnywhere</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font_time</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">pos_time</span><span class="p">,</span><span class="n">time_cur</span><span class="p">,</span><span class="n">option</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">PainUserBtn</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">QPainter</span> <span class="nf">painter</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setRenderHints</span><span class="p">(</span><span class="n">QPainter</span><span class="o">::</span><span class="n">Antialiasing</span> <span class="o">|</span> <span class="n">QPainter</span><span class="o">::</span><span class="n">SmoothPixmapTransform</span><span class="p">);</span><span class="c1">//æ¶ˆé”¯é½¿
</span><span class="c1"></span>    <span class="n">QRect</span> <span class="nf">pos_round</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">);</span>
    <span class="n">QRect</span> <span class="nf">pos_name</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="n">pos_round</span><span class="p">.</span><span class="n">width</span><span class="p">()</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">50</span><span class="p">);</span>
    <span class="n">QFont</span> <span class="nf">font_time</span><span class="p">(</span><span class="s">&#34;å¾®è½¯é›…é»‘&#34;</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>

    <span class="n">QString</span> <span class="n">m_name</span> <span class="o">=</span> <span class="n">getName</span><span class="p">();</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">m_name</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">()){</span>
        <span class="c1">//ç”»åå­—
</span><span class="c1"></span>        <span class="kt">int</span> <span class="n">max_size</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
        <span class="n">QPen</span> <span class="n">pen</span><span class="p">;</span>
        <span class="n">pen</span><span class="p">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">26</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">pen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span><span class="s">&#34;å¾®è½¯é›…é»‘&#34;</span><span class="p">,</span><span class="mi">14</span><span class="p">));</span>
        <span class="n">QString</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">name</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">max_size</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">m_name</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">&gt;</span><span class="n">max_size</span><span class="p">){</span>
            <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">m_name</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">m_name</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span><span class="o">+</span><span class="n">max_size</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">name</span><span class="p">));</span>
            <span class="n">name</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#34;...&#34;</span><span class="p">);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">m_name</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">painter</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="n">pos_name</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">QTextOption</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignLeft</span> <span class="o">|</span> <span class="n">Qt</span><span class="o">::</span><span class="n">AlignVCenter</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="n">State</span> <span class="n">m_state</span> <span class="o">=</span> <span class="n">getMState</span><span class="p">();</span>
    <span class="c1">//å¥½å‹åˆ—è¡¨ä¸­ä¸éœ€è¦ç”»æ—¶é—´
</span><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">m_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">::</span><span class="n">OffLine</span><span class="p">){</span>
        <span class="n">QColor</span> <span class="nf">color_tmp</span><span class="p">(</span><span class="mi">186</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">180</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QBrush</span><span class="p">(</span><span class="n">color_tmp</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">NoPen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">pos_round</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">m_state</span> <span class="o">==</span> <span class="n">State</span><span class="o">::</span><span class="n">OnLine</span><span class="p">){</span>
        <span class="n">QColor</span> <span class="n">color_tmp</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">209</span><span class="p">,</span> <span class="mi">102</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">QBrush</span><span class="p">(</span><span class="n">color_tmp</span><span class="p">));</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">setPen</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">NoPen</span><span class="p">);</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">drawRoundedRect</span><span class="p">(</span><span class="n">pos_round</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UserButton</span><span class="o">::</span><span class="n">updateContent</span><span class="p">(</span><span class="n">QString</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">text</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">m_info_</span><span class="p">){</span>
        <span class="n">m_info_</span><span class="o">-&gt;</span><span class="n">_text</span> <span class="o">=</span> <span class="n">text</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/">å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>æ›´æ–°äº 2022-04-24</span>
            </div><div class="post-info-mod"></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" data-hashtags="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-hashtag="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" data-image="https://img-blog.csdnimg.cn/img_convert/526441b9fa37b831c54f8b76bf498cca.png#pic_center"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Myspace" data-sharer="myspace" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" data-description="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Blogger" data-sharer="blogger" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†" data-description="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://acking-you.github.io/posts/%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6qq%E5%A5%BD%E5%8F%8B%E6%90%9C%E7%B4%A2%E6%A1%86/" data-title="å®ç°å®æ—¶qqå¥½å‹æœç´¢æ¡†"><i class="fab fa-evernote fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/posts/1.3-%E9%94%81%E9%87%8A%E6%94%BE%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%A7%BF%E5%8A%BF-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8Fcondition_variable-%E4%BF%A1%E5%8F%B7%E9%87%8Fsemaphore/" class="prev" rel="prev" title="1.3-å¤šçº¿ç¨‹æ§åˆ¶çš„å¦ä¸€ç§å§¿åŠ¿-æ¡ä»¶å˜é‡(condition_variable), ä¿¡å·é‡(semaphore)"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/posts/%E4%B8%80go%E8%AF%AD%E8%A8%80%E4%B8%8A%E6%89%8B-%E9%9D%92%E8%AE%AD%E8%90%A5%E7%AC%94%E8%AE%B0/" class="next" rel="next" title="Goè¯­è¨€ä¸Šæ‰‹ï¼ˆä¸€ï¼‰ | é’è®­è¥ç¬”è®°">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.86.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href="https://github.com/khusika/FeelIt" target="_blank" rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a>
        </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/"></a></span></div>
</div>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a></div><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><script src="/lib/autocomplete/autocomplete.min.js"></script><script src="/lib/lunr/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.zh.min.js"></script><script src="/lib/lazysizes/lazysizes.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script src="/lib/sharer/sharer.min.js"></script><script src="/lib/katex/katex.min.js"></script><script src="/lib/katex/auto-render.min.js"></script><script src="/lib/katex/copy-tex.min.js"></script><script src="/lib/katex/mhchem.min.js"></script><script>window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":200},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":100,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"}};</script><script src="/js/theme.min.js"></script></body></html>
