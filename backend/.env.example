# Backend Configuration

# LanceDB path (relative to backend/ or absolute path)
LANCEDB_URI=../data/lancedb
COMMENTS_LANCEDB_URI=../data/lancedb-comments

# Server port
PORT=3000

# Bind address (dev default 0.0.0.0, production建议 127.0.0.1)
BIND_ADDR=0.0.0.0

# Runtime environment: development/production
RUST_ENV=development

# Optional: comma-separated CORS allowlist (used in production)
# ALLOWED_ORIGINS=https://acking-you.github.io,https://your-frontend-domain.com

# Admin access control (/admin/*)
ADMIN_LOCAL_ONLY=true
# ADMIN_TOKEN=replace-with-strong-random-token

# Comment runtime defaults
COMMENT_RATE_LIMIT_SECONDS=60
COMMENT_LIST_DEFAULT_LIMIT=20
COMMENT_CLEANUP_RETENTION_DAYS=-1

# Comment AI worker
# COMMENT_AI_CONTENT_API_BASE=http://127.0.0.1:39080/api
# COMMENT_AI_CODEX_SANDBOX=danger-full-access
# COMMENT_AI_CODEX_JSON_STREAM=1
# COMMENT_AI_CODEX_BYPASS=0

# GeoIP (ip_region)
# Auto downloads GeoLite2-City.mmdb.gz when missing.
# GEOIP_DB_PATH defaults to ~/.static-flow/geoip/GeoLite2-City.mmdb
ENABLE_GEOIP_AUTO_DOWNLOAD=true
# GEOIP_DB_PATH=/home/you/.static-flow/geoip/GeoLite2-City.mmdb
# GEOIP_DB_URL=https://cdn.jsdelivr.net/npm/geolite2-city/GeoLite2-City.mmdb.gz
# GEOIP_PROXY_URL=http://127.0.0.1:7890
GEOIP_HTTP_TIMEOUT_SECONDS=120
# Enforce at least region-level detail (not country-only). If unresolved, returns Unknown.
GEOIP_REQUIRE_REGION_DETAIL=true
# Fallback API when local DB cannot resolve region-level detail.
ENABLE_GEOIP_FALLBACK_API=true
# GEOIP_FALLBACK_API_URL=https://ipwho.is/{ip}

# Log level (trace, debug, info, warn, error)
RUST_LOG=info
