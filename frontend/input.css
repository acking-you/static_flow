@import "tailwindcss";

@theme {
  /* Fluent 2 colors */
  --bg: #f3f2f1;
  --text: #1d1f23;
  --muted: #6c7382;
  --surface: #ffffff;
  --surface-rgb: 255, 255, 255;
  --surface-alt: #f6f8fb;
  --border: #c8c6c4;
  --primary: #0078d4;
  --primary-rgb: 0, 120, 212;
  --link: #005a9e;
  --acrylic-bg-light: rgba(255, 255, 255, 0.72);
  --acrylic-bg-dark: rgba(23, 30, 43, 0.72);
  --acrylic-saturate: 1.8;
  --acrylic-blur: 40px;
  --acrylic-light: var(--acrylic-bg-light);
  --acrylic-dark: var(--acrylic-bg-dark);
  --header-bg: var(--acrylic-bg-light);
  --glass-opacity: 0.8;
  --glass-noise-light: 0.1;
  --glass-noise-dark: 0.15;
  --glass-noise-svg: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/></filter><rect width='200' height='200' filter='url(%23n)' opacity='0.1'/></svg>");
  --glass-blur-far: 100px;
  --glass-blur-mid: 80px;
  --glass-blur-near: 60px;
  --glass-alpha-far: 0.5;
  --glass-alpha-mid: 0.65;
  --glass-alpha-near: 0.8;
  --glass-saturate: 1.8;

  /* Fluent 2 shadows & rounding */
  --shadow-sm: 0 0 2px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.13);
  --shadow-2: var(--shadow-sm);
  --shadow-8: 0 4px 10px rgba(0, 0, 0, 0.12), 0 12px 24px rgba(0, 0, 0, 0.18);
  --shadow-4: 0 2px 8px rgba(0, 0, 0, 0.07), 0 10px 20px rgba(0, 0, 0, 0.16);
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 6px 12px rgba(0, 0, 0, 0.16);
  --shadow-lg: 0 2px 6px rgba(0, 0, 0, 0.08), 0 16px 28px rgba(0, 0, 0, 0.2);
  --shadow-16: 0 8px 22px rgba(0, 0, 0, 0.14), 0 20px 42px rgba(0, 0, 0, 0.18);
  --radius: 8px;
  --radius-sm: 4px;
  --radius-lg: 12px;

  /* Layout sizing */
  --header-height-mobile: 4.25rem;
  --header-height-desktop: 4.75rem;
  --hit-size: 2.75rem;

  /* Spacing scale (4px rhythm) */
  --space-2xs: 0.25rem;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2.5rem;
  --space-2xl: 3.5rem;
  --space-card-gap: 1.5rem;

  /* Motion */
  --transition-base: background-color 0.28s ease, color 0.28s ease, border-color 0.28s ease, box-shadow 0.28s ease, transform 0.2s ease;
  --ease-spring: cubic-bezier(0.11, 0.9, 0.2, 1);
  --ease-snap: cubic-bezier(0.5, 0, 0.1, 1);
}

[data-theme=dark],
[theme=dark] {
  --bg: #1b1a1f;
  --text: #f4f4f5;
  --muted: #b3b9c6;
  --surface: #25262c;
  --surface-rgb: 37, 38, 44;
  --surface-alt: #1f2026;
  --border: #3b3f46;
  --primary: #3aa0ff;
  --primary-rgb: 58, 160, 255;
  --link: #8ad8ff;
  --shadow-sm: 0 0 2px rgba(0, 0, 0, 0.45), 0 2px 4px rgba(0, 0, 0, 0.6);
  --shadow-2: var(--shadow-sm);
  --shadow-8: 0 6px 14px rgba(0, 0, 0, 0.5), 0 14px 30px rgba(0, 0, 0, 0.65);
  --shadow-4: 0 2px 8px rgba(0, 0, 0, 0.55), 0 12px 24px rgba(0, 0, 0, 0.65);
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.5), 0 8px 16px rgba(0, 0, 0, 0.6);
  --shadow-lg: 0 2px 6px rgba(0, 0, 0, 0.55), 0 20px 36px rgba(0, 0, 0, 0.65);
  --shadow-16: 0 12px 32px rgba(0, 0, 0, 0.55), 0 26px 50px rgba(0, 0, 0, 0.68);
  --header-bg: var(--acrylic-bg-dark);
  --glass-opacity: 0.75;
  --glass-noise-svg: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/></filter><rect width='200' height='200' filter='url(%23n)' opacity='0.15'/></svg>");
}

@property --search-hero-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

@layer components {
  /* ==========================================
     Logo Design - Terminal/Code Editor Style
     ========================================== */

  /* Import Space Mono font */
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

  .brand-logo {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.5rem 0.75rem;
    font-family: 'Space Mono', monospace;
    font-weight: 700;
    font-size: 1.25rem;
    letter-spacing: 0.05em;
    color: var(--text);
    background: linear-gradient(
      135deg,
      rgba(var(--primary-rgb), 0.05),
      rgba(var(--primary-rgb), 0.02)
    );
    border: 1.5px solid rgba(var(--primary-rgb), 0.2);
    border-radius: 6px;
    box-shadow:
      0 2px 8px rgba(var(--primary-rgb), 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    text-decoration: none;
    overflow: hidden;
  }

  .brand-logo::before {
    content: '[';
    color: var(--primary);
    opacity: 0.8;
    margin-right: 0.2rem;
  }

  .brand-logo::after {
    content: ']';
    color: var(--primary);
    opacity: 0.8;
    margin-left: 0.2rem;
  }

  /* Blinking cursor */
  .brand-logo-cursor {
    display: inline-block;
    width: 2px;
    height: 1em;
    margin-left: 0.15rem;
    background: var(--primary);
    animation: blink 1.2s step-end infinite;
  }

  @keyframes blink {
    0%, 50% {
      opacity: 1;
    }
    51%, 100% {
      opacity: 0;
    }
  }

  /* Hover effects */
  .brand-logo:hover {
    border-color: var(--primary);
    box-shadow:
      0 4px 16px rgba(var(--primary-rgb), 0.25),
      0 0 0 1px rgba(var(--primary-rgb), 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: translateY(-1px);
    background: linear-gradient(
      135deg,
      rgba(var(--primary-rgb), 0.08),
      rgba(var(--primary-rgb), 0.04)
    );
  }

  .brand-logo:hover::before,
  .brand-logo:hover::after {
    opacity: 1;
    color: var(--primary);
  }

  /* Shine effect on hover */
  .brand-logo-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent
    );
    transition: left 0.5s ease;
    pointer-events: none;
  }

  .brand-logo:hover .brand-logo-shine {
    left: 100%;
  }

  /* Dark theme adjustments */
  [data-theme="dark"] .brand-logo,
  [theme="dark"] .brand-logo {
    background: linear-gradient(
      135deg,
      rgba(var(--primary-rgb), 0.08),
      rgba(var(--primary-rgb), 0.03)
    );
    border-color: rgba(var(--primary-rgb), 0.3);
    box-shadow:
      0 2px 12px rgba(var(--primary-rgb), 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  [data-theme="dark"] .brand-logo:hover,
  [theme="dark"] .brand-logo:hover {
    background: linear-gradient(
      135deg,
      rgba(var(--primary-rgb), 0.12),
      rgba(var(--primary-rgb), 0.06)
    );
    border-color: rgba(var(--primary-rgb), 0.6);
    box-shadow:
      0 4px 20px rgba(var(--primary-rgb), 0.3),
      0 0 0 1px rgba(var(--primary-rgb), 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .brand-logo {
      transition: none;
    }
    .brand-logo-cursor {
      animation: none;
      opacity: 1;
    }
    .brand-logo:hover .brand-logo-shine {
      transition: none;
    }
  }

  /* ==========================================
     Terminal-Style Homepage Design
     ========================================== */

  /* Terminal hero container */
  .terminal-hero {
    position: relative;
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.95),
      rgba(var(--surface-rgb), 0.98)
    );
    border: 1.5px solid rgba(var(--primary-rgb), 0.2);
    border-radius: 12px;
    padding: 2rem;
    font-family: 'Space Mono', monospace;
    box-shadow:
      0 4px 16px rgba(var(--primary-rgb), 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    overflow: hidden;
  }

  /* Terminal header bar */
  .terminal-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border);
  }

  .terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }

  .terminal-dot-red { background: #ff5f56; }
  .terminal-dot-yellow { background: #ffbd2e; }
  .terminal-dot-green { background: #27c93f; }

  .terminal-title {
    margin-left: auto;
    font-size: 0.75rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  /* Terminal prompt line */
  .terminal-line {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    font-size: 0.95rem;
    line-height: 1.6;
  }

  .terminal-prompt {
    color: var(--primary);
    font-weight: 700;
    flex-shrink: 0;
  }

  .terminal-content {
    color: var(--text);
    flex: 1;
  }

  .terminal-comment {
    color: var(--muted);
    font-style: italic;
  }

  /* Terminal cursor blink */
  .terminal-cursor {
    display: inline-block;
    width: 8px;
    height: 1.2em;
    background: var(--primary);
    margin-left: 2px;
    animation: blink-terminal 1s step-end infinite;
    vertical-align: text-bottom;
  }

  @keyframes blink-terminal {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  /* System info panel (stats cards) */
  .system-panel {
    position: relative;
    background: rgba(var(--surface-rgb), 0.8);
    border: 1.5px solid rgba(var(--primary-rgb), 0.2);
    border-left: 4px solid var(--primary);
    border-radius: 8px;
    padding: 1.25rem 1.5rem;
    font-family: 'Space Mono', monospace;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow:
      0 2px 8px rgba(var(--primary-rgb), 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  .system-panel:hover {
    border-color: var(--primary);
    transform: translateX(4px);
    box-shadow:
      0 4px 16px rgba(var(--primary-rgb), 0.2),
      -4px 0 12px rgba(var(--primary-rgb), 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .system-panel-label {
    font-size: 0.75rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 0.5rem;
  }

  .system-panel-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary);
    line-height: 1;
  }

  .system-panel-unit {
    font-size: 0.875rem;
    color: var(--text);
    margin-top: 0.25rem;
  }

  /* Command list (tech stack) */
  .command-list {
    background: rgba(var(--surface-rgb), 0.9);
    border: 1.5px solid rgba(var(--primary-rgb), 0.15);
    border-radius: 10px;
    padding: 1.5rem;
    font-family: 'Space Mono', monospace;
  }

  .command-list-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.25rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px dashed var(--border);
  }

  .command-list-title {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.12em;
  }

  .command-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-left: 3px solid transparent;
    border-radius: 6px;
    transition: all 0.2s ease;
    text-decoration: none;
    color: inherit;
  }

  .command-item:hover {
    border-left-color: var(--primary);
    background: var(--surface-alt);
    transform: translateX(4px);
    box-shadow: -3px 0 8px rgba(var(--primary-rgb), 0.15);
  }

  .command-item-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
    flex-shrink: 0;
  }

  .command-item-name {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text);
  }

  .command-item-arrow {
    margin-left: auto;
    color: var(--muted);
    font-size: 0.875rem;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .command-item:hover .command-item-arrow {
    opacity: 1;
  }

  /* Dark theme adjustments */
  [data-theme="dark"] .terminal-hero,
  [theme="dark"] .terminal-hero {
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.9),
      rgba(var(--surface-rgb), 0.95)
    );
    border-color: rgba(var(--primary-rgb), 0.3);
    box-shadow:
      0 4px 20px rgba(var(--primary-rgb), 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.05);
  }

  [data-theme="dark"] .system-panel,
  [theme="dark"] .system-panel {
    background: rgba(var(--surface-rgb), 0.6);
    border-color: rgba(var(--primary-rgb), 0.3);
  }

  [data-theme="dark"] .system-panel:hover,
  [theme="dark"] .system-panel:hover {
    background: rgba(var(--surface-rgb), 0.8);
    border-color: rgba(var(--primary-rgb), 0.6);
  }

  [data-theme="dark"] .command-list,
  [theme="dark"] .command-list {
    background: rgba(var(--surface-rgb), 0.5);
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .terminal-cursor {
      animation: none;
      opacity: 1;
    }
    .system-panel,
    .command-item {
      transition: none;
    }
    .system-panel:hover,
    .command-item:hover {
      transform: none;
    }
    .btn-fluent-search-hero,
    .btn-fluent-search-hero:hover {
      animation: none;
    }
    .btn-fluent-search-hero::before,
    .btn-fluent-search-hero:hover::before {
      animation: none;
    }
    .btn-fluent-search-hero::after,
    .btn-fluent-search-hero:hover::after {
      animation: none;
      background-position: 50% 0;
    }
  }

  /* Fluent 2 button system */
  .btn-fluent-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    border: 1px solid transparent;
    background: var(--primary);
    color: #fff;
    font-weight: 600;
    box-shadow: var(--shadow-2);
    transition: all 0.1s ease-out;
  }

  .btn-fluent-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--primary);
    font-weight: 600;
    transition: all 0.1s ease-out;
  }

  .btn-fluent-search-hero {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    position: relative;
    padding: 0.66rem 1.2rem;
    border: none;
    border-radius: var(--radius);
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.95),
      rgba(var(--surface-rgb), 0.88)
    );
    color: var(--text);
    font-family: var(--font-mono);
    font-weight: 600;
    letter-spacing: 0.02em;
    text-decoration: none;
    overflow: hidden;
    box-shadow:
      var(--shadow-2),
      0 0 12px rgba(var(--primary-rgb), 0.08);
    transform: translateZ(0);
    transition: transform 0.28s var(--ease-snap), color 0.28s var(--ease-snap), background 0.28s var(--ease-snap);
    isolation: isolate;
    animation: search-hero-glow 4s ease-in-out infinite;
  }

  /* Rotating conic gradient border */
  .btn-fluent-search-hero::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    background: conic-gradient(
      from var(--search-hero-angle, 0deg),
      #58a6ff,
      #8b5cf6,
      #f472b6,
      #38bdf8,
      #58a6ff
    );
    animation: search-hero-rotate 4s linear infinite;
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask-composite: exclude;
    padding: 1.5px;
    pointer-events: none;
    z-index: -1;
  }

  /* Shimmer sweep layer */
  .btn-fluent-search-hero::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      105deg,
      transparent 40%,
      rgba(var(--primary-rgb), 0.06) 45%,
      rgba(var(--primary-rgb), 0.10) 50%,
      rgba(var(--primary-rgb), 0.06) 55%,
      transparent 60%
    );
    background-size: 250% 100%;
    animation: search-hero-shimmer 8s var(--ease-snap) infinite;
    pointer-events: none;
    z-index: 0;
  }

  .btn-fluent-search-hero i {
    color: var(--primary);
    font-size: 1rem;
    transition: transform 0.28s var(--ease-spring), filter 0.28s ease;
    position: relative;
    z-index: 1;
    filter: drop-shadow(0 0 2px rgba(var(--primary-rgb), 0.3));
  }

  .btn-fluent-search-hero > * {
    position: relative;
    z-index: 1;
  }

  .btn-fluent-ghost {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.35rem;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    border: none;
    background: transparent;
    color: var(--text);
    font-weight: 600;
    transition: all 0.1s ease-out;
  }

  .btn-fluent-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 4px;
    background: transparent;
    color: var(--text);
    transition: all 0.1s ease-out;
  }

  .btn-fluent-primary:disabled,
  .btn-fluent-secondary:disabled,
  .btn-fluent-search-hero:disabled,
  .btn-fluent-ghost:disabled,
  .btn-fluent-icon:disabled,
  .btn-fluent-primary.disabled,
  .btn-fluent-secondary.disabled,
  .btn-fluent-search-hero.disabled,
  .btn-fluent-ghost.disabled,
  .btn-fluent-icon.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    pointer-events: none;
  }

  /* Iridescent borders */
  .glass-iridescent {
    position: relative;
    background:
      linear-gradient(120deg, rgba(255,255,255,0.85), rgba(255,192,203,0.8), rgba(0,255,255,0.8), rgba(255,255,0,0.75), rgba(255,255,255,0.85)) border-box,
      var(--surface) padding-box;
    border: 1.5px solid transparent;
    border-radius: var(--radius);
    background-clip: padding-box, border-box;
  }

  .glass-iridescent-animated {
    position: relative;
    background:
      conic-gradient(from 0deg, rgba(255,255,255,0.85), rgba(255,192,203,0.8), rgba(0,255,255,0.8), rgba(255,255,0,0.75), rgba(255,255,255,0.85)) border-box,
      var(--surface) padding-box;
    border: 1.5px solid transparent;
    border-radius: var(--radius);
    background-clip: padding-box, border-box;
    animation: rotate-rainbow 8s linear infinite;
  }

  @keyframes rotate-rainbow {
    to {
      transform: rotate(360deg);
    }
  }

  /* Realistic glass lighting */
  .glass-realistic {
    box-shadow:
      inset 0 1px 2px rgba(255, 255, 255, 0.5),
      inset 0 -2px 4px rgba(0, 0, 0, 0.2),
      0 8px 32px rgba(0, 0, 0, 0.15);
  }

  [data-theme=dark] .glass-realistic,
  [theme=dark] .glass-realistic {
    box-shadow:
      inset 0 1px 2px rgba(255, 255, 255, 0.35),
      inset 0 -2px 4px rgba(0, 0, 0, 0.35),
      0 8px 32px rgba(0, 0, 0, 0.25);
  }

  /* Button liquid effects */
  .btn-fluent-primary,
  .btn-fluent-secondary,
  .btn-fluent-ghost,
  .btn-fluent-icon {
    position: relative;
    overflow: hidden;
    transform: translateZ(0);
    transition: transform 0.2s var(--ease-snap), box-shadow 0.2s var(--ease-snap);
    will-change: transform, box-shadow;
  }

  .btn-fluent-primary::before,
  .btn-fluent-secondary::before,
  .btn-fluent-ghost::before,
  .btn-fluent-icon::before {
    content: "";
    position: absolute;
    inset: -50% -40%;
    background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.32) 50%, transparent 100%);
    transform: translateX(-120%) rotate(45deg);
    pointer-events: none;
    opacity: 0;
  }

  .btn-fluent-primary:hover,
  .btn-fluent-secondary:hover,
  .btn-fluent-ghost:hover,
  .btn-fluent-icon:hover {
    transform: scale(1.02);
  }

  .btn-fluent-primary:hover {
    background: color-mix(in srgb, var(--primary) 85%, black);
    color: #fff;
    box-shadow: var(--shadow-4);
  }

  .btn-fluent-secondary:hover {
    background: var(--surface-alt);
  }

  .btn-fluent-search-hero:hover {
    color: var(--text);
    transform: translateY(-2px) scale(1.03);
    animation: search-hero-glow-hover 2.5s ease-in-out infinite;
  }

  .btn-fluent-search-hero:hover::before {
    animation-duration: 2s;
  }

  .btn-fluent-search-hero:hover::after {
    animation-duration: 3s;
    background: linear-gradient(
      105deg,
      transparent 40%,
      rgba(var(--primary-rgb), 0.08) 45%,
      rgba(var(--primary-rgb), 0.13) 50%,
      rgba(var(--primary-rgb), 0.08) 55%,
      transparent 60%
    );
    background-size: 250% 100%;
  }

  .btn-fluent-search-hero:hover i {
    transform: rotate(-12deg) scale(1.15);
    filter:
      drop-shadow(0 0 6px rgba(var(--primary-rgb), 0.5))
      drop-shadow(0 0 12px rgba(139, 92, 246, 0.2));
  }

  .btn-fluent-ghost:hover {
    background: var(--surface-alt);
    color: var(--primary);
  }

  .btn-fluent-icon:hover {
    background: var(--surface-alt);
    color: var(--primary);
  }

  .btn-fluent-primary:hover::before,
  .btn-fluent-secondary:hover::before,
  .btn-fluent-ghost:hover::before,
  .btn-fluent-icon:hover::before {
    opacity: 1;
    animation: liquid-shimmer 0.8s ease-out;
  }

  .btn-fluent-primary:active,
  .btn-fluent-secondary:active,
  .btn-fluent-ghost:active,
  .btn-fluent-icon:active {
    transform: scale(0.98);
  }

  .btn-fluent-search-hero:active {
    transform: translateY(0) scale(0.98);
  }

  .btn-fluent-primary::after,
  .btn-fluent-secondary::after,
  .btn-fluent-ghost::after,
  .btn-fluent-icon::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: radial-gradient(circle, rgba(var(--primary-rgb), 0.15) 0%, transparent 60%);
    transform: scale(0);
    opacity: 0;
    pointer-events: none;
  }

  .btn-fluent-primary:active::after,
  .btn-fluent-secondary:active::after,
  .btn-fluent-ghost:active::after,
  .btn-fluent-icon:active::after {
    animation: button-ripple 0.6s ease-out forwards;
  }

  [data-theme="dark"] .btn-fluent-search-hero,
  [theme="dark"] .btn-fluent-search-hero {
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.92),
      rgba(var(--surface-rgb), 0.74)
    );
    animation: search-hero-glow-dark 4s ease-in-out infinite;
  }

  [data-theme="dark"] .btn-fluent-search-hero::before,
  [theme="dark"] .btn-fluent-search-hero::before {
    padding: 1.5px;
    opacity: 0.85;
  }

  [data-theme="dark"] .btn-fluent-search-hero:hover,
  [theme="dark"] .btn-fluent-search-hero:hover {
    animation: search-hero-glow-dark-hover 2.5s ease-in-out infinite;
  }

  [data-theme="dark"] .btn-fluent-search-hero i,
  [theme="dark"] .btn-fluent-search-hero i {
    filter: drop-shadow(0 0 5px rgba(58, 160, 255, 0.5));
  }

  [data-theme="dark"] .btn-fluent-search-hero:hover i,
  [theme="dark"] .btn-fluent-search-hero:hover i {
    filter:
      drop-shadow(0 0 8px rgba(58, 160, 255, 0.6))
      drop-shadow(0 0 16px rgba(139, 92, 246, 0.3));
  }

  @keyframes button-ripple {
    0% {
      transform: scale(0);
      opacity: 0.5;
    }
    100% {
      transform: scale(3);
      opacity: 0;
    }
  }

  /* GitHub Wrapped 2025 Button - Featured Entry */
  .github-wrapped-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.875rem;
    position: relative;
    padding: 0.875rem 1.25rem;
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.95),
      rgba(var(--surface-rgb), 0.85)
    );
    border: 1px solid transparent;
    border-radius: var(--radius);
    text-decoration: none;
    color: var(--text);
    font-family: var(--font-mono);
    overflow: hidden;
    transition: all 0.2s ease-out;
    transform: translateZ(0);
    box-shadow: var(--shadow-2);
  }

  .github-wrapped-btn::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      135deg,
      #58a6ff,
      #8b5cf6,
      #f472b6,
      #58a6ff
    );
    background-size: 300% 300%;
    animation: gradient-border 4s ease infinite;
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  .github-wrapped-btn::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      rgba(88, 166, 255, 0.08),
      rgba(139, 92, 246, 0.08),
      rgba(244, 114, 182, 0.08)
    );
    opacity: 0;
    transition: opacity 0.2s ease;
    pointer-events: none;
  }

  .github-wrapped-btn:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: var(--shadow-4), 0 0 20px rgba(88, 166, 255, 0.15);
  }

  .github-wrapped-btn:hover::after {
    opacity: 1;
  }

  .github-wrapped-btn:active {
    transform: translateY(0) scale(0.98);
  }

  .github-wrapped-badge {
    position: absolute;
    top: -1px;
    right: -1px;
    padding: 0.2rem 0.5rem;
    font-size: 0.625rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    color: #fff;
    background: linear-gradient(135deg, #f472b6, #8b5cf6);
    border-radius: 0 var(--radius) 0 var(--radius);
    animation: badge-pulse 2s ease-in-out infinite;
  }

  .github-wrapped-btn i {
    font-size: 1.5rem;
    color: var(--primary);
    transition: transform 0.2s ease;
  }

  .github-wrapped-btn:hover i {
    transform: rotate(-8deg) scale(1.1);
  }

  .github-wrapped-text {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .github-wrapped-title {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--text);
    letter-spacing: -0.01em;
  }

  .github-wrapped-subtitle {
    font-size: 0.75rem;
    color: var(--muted);
    transition: color 0.2s ease;
  }

  .github-wrapped-btn:hover .github-wrapped-subtitle {
    color: var(--primary);
  }

  @keyframes gradient-border {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  @keyframes search-hero-rotate {
    to { --search-hero-angle: 360deg; }
  }

  @keyframes search-hero-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -50% 0; }
  }

  @keyframes search-hero-glow {
    0%, 100% {
      box-shadow:
        var(--shadow-2),
        0 0 12px rgba(var(--primary-rgb), 0.08);
    }
    50% {
      box-shadow:
        var(--shadow-2),
        0 0 18px rgba(var(--primary-rgb), 0.14);
    }
  }

  @keyframes search-hero-glow-hover {
    0%, 100% {
      box-shadow:
        var(--shadow-4),
        0 0 20px rgba(var(--primary-rgb), 0.18),
        0 0 40px rgba(88, 166, 255, 0.08);
    }
    50% {
      box-shadow:
        var(--shadow-4),
        0 0 28px rgba(var(--primary-rgb), 0.25),
        0 0 48px rgba(88, 166, 255, 0.12);
    }
  }

  @keyframes search-hero-glow-dark {
    0%, 100% {
      box-shadow:
        var(--shadow-2),
        0 0 16px rgba(58, 160, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.04);
    }
    50% {
      box-shadow:
        var(--shadow-2),
        0 0 24px rgba(58, 160, 255, 0.18),
        0 0 8px rgba(139, 92, 246, 0.06),
        inset 0 1px 0 rgba(255, 255, 255, 0.04);
    }
  }

  @keyframes search-hero-glow-dark-hover {
    0%, 100% {
      box-shadow:
        var(--shadow-4),
        0 0 32px rgba(58, 160, 255, 0.28),
        0 0 64px rgba(139, 92, 246, 0.12);
    }
    50% {
      box-shadow:
        var(--shadow-4),
        0 0 40px rgba(58, 160, 255, 0.35),
        0 0 72px rgba(139, 92, 246, 0.16);
    }
  }

  @keyframes badge-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  /* Dark theme adjustments for GitHub Wrapped */
  [data-theme="dark"] .github-wrapped-btn,
  [theme="dark"] .github-wrapped-btn {
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.9),
      rgba(var(--surface-rgb), 0.7)
    );
  }

  [data-theme="dark"] .github-wrapped-btn:hover,
  [theme="dark"] .github-wrapped-btn:hover {
    box-shadow: var(--shadow-4), 0 0 30px rgba(88, 166, 255, 0.2);
  }

  /* GitHub Wrapped Container & Group */
  .github-wrapped-container {
    position: relative;
  }

  .github-wrapped-group {
    display: inline-flex;
    align-items: stretch;
  }

  .github-wrapped-group .github-wrapped-btn {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  .github-wrapped-group .github-wrapped-btn::before {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  /* Expand button */
  .github-wrapped-expand {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.95),
      rgba(var(--surface-rgb), 0.85)
    );
    border: 1px solid transparent;
    border-left: none;
    border-radius: 0 var(--radius) var(--radius) 0;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
  }

  .github-wrapped-expand::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, #58a6ff, #8b5cf6, #f472b6, #58a6ff);
    background-size: 300% 300%;
    animation: gradient-border 4s ease infinite;
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
    /* Hide left border to connect with main button */
    clip-path: inset(0 0 0 1px);
  }

  .github-wrapped-expand:hover {
    color: var(--primary);
    background: var(--surface-alt);
  }

  .github-wrapped-expand i {
    transition: transform 0.2s ease;
  }

  .github-wrapped-expand.expanded i {
    transform: rotate(180deg);
  }

  /* Dropdown - use fixed positioning to escape overflow:hidden */
  .github-wrapped-dropdown {
    position: fixed;
    min-width: 200px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-4);
    overflow: hidden;
    z-index: 9999;
    animation: dropdown-appear 0.15s ease-out;
  }

  @keyframes dropdown-appear {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .github-wrapped-dropdown-header {
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-bottom: 1px solid var(--border);
    background: var(--surface-alt);
  }

  .github-wrapped-dropdown-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    color: var(--text);
    text-decoration: none;
    transition: all 0.15s ease;
  }

  .github-wrapped-dropdown-item:hover {
    background: var(--surface-alt);
    color: var(--primary);
  }

  .github-wrapped-dropdown-item i {
    font-size: 1rem;
    color: var(--muted);
    transition: color 0.15s ease;
  }

  .github-wrapped-dropdown-item:hover i {
    color: var(--primary);
  }

  .github-wrapped-dropdown-item.latest {
    background: linear-gradient(
      90deg,
      rgba(88, 166, 255, 0.08),
      transparent
    );
  }

  .github-wrapped-latest-tag {
    margin-left: auto;
    padding: 0.125rem 0.375rem;
    font-size: 0.625rem;
    font-weight: 600;
    color: #fff;
    background: linear-gradient(135deg, #58a6ff, #8b5cf6);
    border-radius: 0.25rem;
  }

  /* Dark theme for dropdown */
  [data-theme="dark"] .github-wrapped-expand,
  [theme="dark"] .github-wrapped-expand {
    background: linear-gradient(
      135deg,
      rgba(var(--surface-rgb), 0.9),
      rgba(var(--surface-rgb), 0.7)
    );
  }

  [data-theme="dark"] .github-wrapped-dropdown,
  [theme="dark"] .github-wrapped-dropdown {
    background: rgba(var(--surface-rgb), 0.95);
    backdrop-filter: blur(12px);
  }

  /* Liquid glass surfaces */
  .liquid-glass,
  .liquid-glass-strong,
  .liquid-glass-subtle {
    background: rgba(var(--surface-rgb), var(--glass-alpha-mid));
    backdrop-filter: blur(var(--glass-blur-mid)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur-mid)) saturate(var(--acrylic-saturate));
    border: 1px solid rgba(255, 255, 255, 0.18);
    box-shadow:
      inset 0 1px 2px rgba(255, 255, 255, 0.5),
      inset 0 -2px 4px rgba(0, 0, 0, 0.2),
      var(--shadow-4),
      0 8px 32px rgba(0, 0, 0, 0.15);
    border-radius: var(--radius);
    transition: all 0.3s ease;
    will-change: transform, filter;
    transform: translateZ(0);
    backface-visibility: hidden;
    contain: layout paint;
  }

  .liquid-glass-strong {
    background: rgba(var(--surface-rgb), var(--glass-alpha-near));
    backdrop-filter: blur(var(--glass-blur-near)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur-near)) saturate(var(--acrylic-saturate));
  }

  .liquid-glass-subtle {
    background: rgba(var(--surface-rgb), var(--glass-alpha-far));
    backdrop-filter: blur(var(--glass-blur-far)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur-far)) saturate(var(--acrylic-saturate));
  }

  /* 3D depth utilities */
  .card-3d-container {
    position: relative;
    perspective: 1000px;
    perspective-origin: 50% 50%;
    transform-style: preserve-3d;
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
  }

  .liquid-glass-far,
  .liquid-glass-mid,
  .liquid-glass-near {
    transform-style: preserve-3d;
    transform: translateZ(0);
    will-change: transform, filter;
    backface-visibility: hidden;
    border: 1px solid rgba(255, 255, 255, 0.18);
  }

  .liquid-glass-far {
    background: rgba(var(--surface-rgb), var(--glass-alpha-far));
    backdrop-filter: blur(var(--glass-blur-far)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur-far)) saturate(var(--acrylic-saturate));
    transform: translateZ(-50px);
    box-shadow: 0 18px 60px rgba(0, 0, 0, 0.16);
  }

  .liquid-glass-mid {
    background: rgba(var(--surface-rgb), var(--glass-alpha-mid));
    backdrop-filter: blur(var(--glass-blur-mid)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur-mid)) saturate(var(--acrylic-saturate));
    transform: translateZ(0);
    box-shadow: 0 24px 80px rgba(0, 0, 0, 0.2);
  }

  .liquid-glass-near {
    background: rgba(var(--surface-rgb), var(--glass-alpha-near));
    backdrop-filter: blur(var(--glass-blur-near)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--glass-blur-near)) saturate(var(--acrylic-saturate));
    transform: translateZ(50px);
    box-shadow: 0 32px 110px rgba(0, 0, 0, 0.24);
  }

  /* Stats card liquid effects */
.stats-card {
  position: relative;
  overflow: hidden;
  perspective: 1000px;
  perspective-origin: 50% 50%;
  --morph-x: 0px;
  --morph-y: 0px;
  --tilt-x: 0deg;
  --tilt-y: 0deg;
  --magnetic-x: 0px;
  --magnetic-y: 0px;
  --card-lift: 0px;
  --card-scale: 1;
  --card-rotate: 0deg;
  transform-style: preserve-3d;
  transform: perspective(1000px) translate(var(--magnetic-x), var(--magnetic-y)) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) translateY(var(--card-lift)) scale(var(--card-scale)) rotate(var(--card-rotate)) translateZ(0);
  transition: transform 0.2s var(--ease-spring), box-shadow 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), border-left-width 0.3s var(--ease-spring);
  will-change: transform, box-shadow, border-left-width;
  box-shadow: var(--shadow-2);
  backface-visibility: hidden;
  border-radius: calc(var(--radius) + var(--morph-y)) calc(var(--radius) - var(--morph-x)) calc(var(--radius) + var(--morph-x)) calc(var(--radius) - var(--morph-y));
}

  .stats-card::before {
    content: "";
    position: absolute;
    inset: -40% -30%;
    background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.26) 45%, transparent 85%);
    transform: translateX(-120%) rotate(45deg);
    opacity: 0;
    pointer-events: none;
  }

.stats-card:hover {
  --card-lift: -6px;
  --card-scale: 1.02;
  border-left-width: 6px;
  box-shadow:
    var(--shadow-8),
    inset 0 1px 1px rgba(255, 255, 255, 0.25),
    -6px 0 12px rgba(var(--primary-rgb), 0.3);
  animation: glow-pulse 2s ease-in-out infinite;
}

.stats-card::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 30%, transparent 70%, rgba(255,255,255,0.2) 100%);
  opacity: 0;
  transition: opacity 0.3s ease, background-position 0.6s ease;
}

.stats-card:hover::after {
  opacity: 0; /* 明亮模式下禁用高亮 */
  background-position: 120% 120%;
}

/* 仅在暗黑模式下启用镜面反射 */
[data-theme=dark] .stats-card:hover::after,
[theme=dark] .stats-card:hover::after {
  opacity: 1;
}

  .stats-card:hover::before {
    opacity: 1;
    /* animation: liquid-shimmer 0.8s ease-out; */ /* 移除闪光效果 */
  }

  .stats-card .stats-ripple {
    position: absolute;
    width: 120px;
    height: 120px;
    left: var(--ripple-x);
    top: var(--ripple-y);
    transform: translate(-50%, -50%) scale(0);
    border-radius: 9999px;
    background: rgba(var(--primary-rgb), 0.12);
    pointer-events: none;
    animation: liquid-ripple 0.6s ease-out forwards;
  }

  /* Spotlight infrastructure */
  .spotlight {
    position: fixed;
    width: 800px;
    height: 800px;
    background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.03) 40%, transparent 80%);
    mix-blend-mode: screen;
    pointer-events: none;
    top: 0;
    left: 0;
    transform: translate(-50%, -50%) translateZ(0);
    z-index: 999;
    opacity: 0; /* 默认隐藏（明亮模式） */
    will-change: transform;
  }

  [data-theme=dark] .spotlight,
  [theme=dark] .spotlight {
    background: radial-gradient(circle at center, rgba(255,255,255,0.14) 0%, rgba(255,255,255,0.06) 40%, transparent 80%);
    opacity: 1; /* 仅在暗黑模式下显示 */
  }

  /* Reusable shimmer hover */
  .shimmer-hover {
    position: relative;
    overflow: hidden;
  }

  .shimmer-hover::before {
    content: "";
    position: absolute;
    inset: -40% -30%;
    background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.22) 45%, transparent 85%);
    transform: translateX(-120%) rotate(45deg);
    opacity: 0;
    pointer-events: none;
  }

  .shimmer-hover:hover::before {
    opacity: 1;
    animation: liquid-shimmer 0.8s ease-out;
  }

  /* Subtle glass noise texture */
  .glass-texture-bg {
    background-color: var(--bg);
    background-image: var(--glass-noise-svg);
    background-repeat: repeat;
    background-size: 200px 200px;
    transition: background-color 0.3s ease, background-image 0.3s ease;
  }

  /* Specular highlight utility */
  .glass-specular {
    position: relative;
    overflow: hidden;
  }

  .glass-specular::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 30%, transparent 70%, rgba(255,255,255,0.2) 100%);
    opacity: 0;
    transition: opacity 0.3s ease, background-position 0.6s ease;
  }

  .glass-specular:hover::after {
    opacity: 1;
    background-position: 120% 120%;
  }

  /* Liquid card effects */
.article-card {
  position: relative;
  overflow: hidden;
  perspective: 1000px;
  perspective-origin: 50% 50%;
  --morph-x: 0px;
  --morph-y: 0px;
  --tilt-x: 0deg;
  --tilt-y: 0deg;
  --magnetic-x: 0px;
  --magnetic-y: 0px;
  --card-lift: 0px;
  --card-scale: 1;
  --card-rotate: 0deg;
  transform-style: preserve-3d;
  transform: perspective(1000px) translate(var(--magnetic-x), var(--magnetic-y)) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) translateY(var(--card-lift)) scale(var(--card-scale)) rotate(var(--card-rotate)) translateZ(0);
  will-change: transform, box-shadow;
  transition: transform 0.2s var(--ease-spring), box-shadow 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  box-shadow: var(--shadow-2);
  backface-visibility: hidden;
  border-radius: calc(var(--radius) + var(--morph-y)) calc(var(--radius) - var(--morph-x)) calc(var(--radius) + var(--morph-x)) calc(var(--radius) - var(--morph-y));
}

  .article-card::before {
    content: "";
    position: absolute;
    inset: -40% -30%;
    background: linear-gradient(120deg, transparent 0%, rgba(255, 255, 255, 0.28) 40%, transparent 80%);
    transform: translateX(-120%) rotate(45deg);
    opacity: 0;
    pointer-events: none;
  }

.article-card:hover {
  --card-lift: -8px;
  --card-scale: 1.02;
  --card-rotate: 0.5deg;
  box-shadow:
    var(--shadow-8),
    inset 0 1px 1px rgba(255, 255, 255, 0.3),
    0 0 30px rgba(var(--primary-rgb), 0.3);
  animation: glow-pulse 2s ease-in-out infinite;
}

  .article-card:hover::before {
    opacity: 1;
    /* animation: liquid-shimmer 0.8s ease-out; */ /* 移除闪光效果 */
  }

.article-card .liquid-ripple {
  position: absolute;
  width: 120px;
  height: 120px;
  left: var(--ripple-x);
  top: var(--ripple-y);
  transform: translate(-50%, -50%) scale(0);
  border-radius: 9999px;
  background: rgba(var(--primary-rgb), 0.12);
  pointer-events: none;
  animation: liquid-ripple 0.6s ease-out forwards;
}

  .article-card::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 30%, transparent 70%, rgba(255,255,255,0.2) 100%);
    opacity: 0;
    transition: opacity 0.3s ease, background-position 0.6s ease;
  }

  .article-card:hover::after {
    opacity: 0; /* 明亮模式下禁用高亮 */
    background-position: 120% 120%;
  }

  /* 仅在暗黑模式下启用镜面反射 */
  [data-theme=dark] .article-card:hover::after,
  [theme=dark] .article-card:hover::after {
    opacity: 1;
  }

.liquid-card {
  --morph-x: 0px;
  --morph-y: 0px;
  --magnetic-x: 0px;
  --magnetic-y: 0px;
  border-radius: calc(var(--radius) + var(--morph-y)) calc(var(--radius) - var(--morph-x)) calc(var(--radius) + var(--morph-x)) calc(var(--radius) - var(--morph-y));
  transition: border-radius 0.15s ease-out;
  will-change: border-radius, transform;
  transform-style: preserve-3d;
  backface-visibility: hidden;
  transform: translateZ(0);
}

.fluid-edges {
  animation: fluid-flow 12s ease-in-out infinite;
}

.liquid-pulse {
  animation: liquid-pulse 4s ease-in-out infinite;
}

.wave-distort {
  filter: url(#wave-filter);
}

.wave-distort:hover {
  animation: wave-distort-pulse 3s ease-in-out infinite;
}

  @keyframes wave-distort-pulse {
  0% {
    filter: url(#wave-filter);
    transform: translate(var(--magnetic-x), var(--magnetic-y)) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) translateY(var(--card-lift)) scale(var(--card-scale)) rotate(var(--card-rotate)) translateZ(0);
  }
  50% {
    filter: url(#wave-filter);
    transform: translate(var(--magnetic-x), var(--magnetic-y)) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) translateY(var(--card-lift)) scale(calc(var(--card-scale) + 0.01)) rotate(var(--card-rotate)) translateZ(0);
  }
  100% {
    filter: url(#wave-filter);
    transform: translate(var(--magnetic-x), var(--magnetic-y)) rotateX(var(--tilt-x)) rotateY(var(--tilt-y)) translateY(var(--card-lift)) scale(var(--card-scale)) rotate(var(--card-rotate)) translateZ(0);
  }
}

.stats-card::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 30%, transparent 70%, rgba(255,255,255,0.2) 100%);
  opacity: 0;
  transition: opacity 0.3s ease, background-position 0.6s ease;
}

.stats-card:hover::after {
  opacity: 0; /* 明亮模式下禁用高亮 */
  background-position: 120% 120%;
}

/* 仅在暗黑模式下启用镜面反射 */
[data-theme=dark] .stats-card:hover::after,
[theme=dark] .stats-card:hover::after {
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  .card-3d-container {
    perspective: none;
    transform: translateZ(0);
    transform-style: flat;
    will-change: auto;
  }

  .article-card,
  .stats-card {
    --tilt-x: 0deg;
    --tilt-y: 0deg;
    --card-lift: 0px;
    --card-scale: 1;
    --card-rotate: 0deg;
    --magnetic-x: 0px;
    --magnetic-y: 0px;
    transform: translateZ(0);
    transform-style: flat;
    will-change: opacity, box-shadow, border-left-width;
    transition: box-shadow 0.2s ease, border-left-width 0.2s ease;
  }

  .liquid-glass-far,
  .liquid-glass-mid,
  .liquid-glass-near {
    transform: translateZ(0);
    will-change: auto;
  }
}

.glass-refraction {
  position: relative;
  background-image:
    linear-gradient(120deg, transparent 30%, rgba(255,255,255,0.08) 50%, transparent 70%),
    linear-gradient(240deg, transparent 30%, rgba(0,255,255,0.08) 50%, transparent 70%);
  background-blend-mode: screen;
}

  @keyframes liquid-shimmer {
    0% {
      transform: translateX(-120%) rotate(45deg);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    100% {
      transform: translateX(200%) rotate(45deg);
      opacity: 0;
    }
  }

  @keyframes liquid-ripple {
    0% {
      transform: translate(-50%, -50%) scale(0);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) scale(4);
      opacity: 0;
    }
  }

  @keyframes mesh-float {
    0% {
      background-position: 20% 30%, 80% 70%, 50% 50%, 0 0;
    }
    33% {
      background-position: 30% 40%, 70% 80%, 60% 40%, 0 0;
    }
    66% {
      background-position: 25% 60%, 60% 50%, 45% 65%, 0 0;
    }
    100% {
      background-position: 20% 30%, 80% 70%, 50% 50%, 0 0;
    }
  }

  @keyframes glow-pulse {
    0% {
      box-shadow:
        var(--shadow-8),
        inset 0 1px 1px rgba(255, 255, 255, 0.3),
        0 0 24px rgba(var(--primary-rgb), 0.25);
    }
    50% {
      box-shadow:
        var(--shadow-8),
        inset 0 1px 1px rgba(255, 255, 255, 0.3),
        0 0 34px rgba(var(--primary-rgb), 0.35);
    }
    100% {
      box-shadow:
        var(--shadow-8),
        inset 0 1px 1px rgba(255, 255, 255, 0.3),
        0 0 24px rgba(var(--primary-rgb), 0.25);
    }
  }

  @keyframes fluid-flow {
    0%   { border-radius: 30% 70% 68% 32% / 30% 70% 32% 68%; }
    33%  { border-radius: 58% 42% 76% 24% / 46% 54% 30% 70%; }
    66%  { border-radius: 40% 60% 52% 48% / 60% 40% 68% 32%; }
    100% { border-radius: 30% 70% 68% 32% / 30% 70% 32% 68%; }
  }

  @keyframes liquid-pulse {
    0%   { border-radius: 16px 20px 18px 22px / 22px 18px 20px 16px; }
    50%  { border-radius: 20px 16px 22px 18px / 18px 22px 16px 20px; }
    100% { border-radius: 16px 20px 18px 22px / 22px 18px 20px 16px; }
  }

  @media (prefers-reduced-motion: reduce) {
    .article-card,
    .article-card:hover {
      transform: none !important;
      box-shadow: var(--shadow-2) !important;
    }
    .article-card::before {
      animation: none !important;
      opacity: 0 !important;
    }
    .article-card .liquid-ripple {
      animation: none !important;
      opacity: 0 !important;
    }

    .fluid-edges,
    .liquid-pulse,
    .wave-distort:hover {
      animation: none !important;
    }

    body {
      animation: none !important;
    }
  }

  /* Subtle glass noise texture */
  .glass-texture-bg {
    background-color: var(--bg);
    background-image: var(--glass-noise-svg);
    background-repeat: repeat;
    background-size: 200px 200px;
    transition: background-color 0.3s ease, background-image 0.3s ease;
  }

  /* Loading overlay helper */
  .loading-spinner-overlay {
    backdrop-filter: blur(var(--acrylic-blur)) saturate(var(--acrylic-saturate));
    -webkit-backdrop-filter: blur(var(--acrylic-blur)) saturate(var(--acrylic-saturate));
  }

  .hero-avatar-trigger {
    transition: transform .4s var(--ease-spring), box-shadow .4s var(--ease-spring);
    will-change: transform;
  }

  .hero-avatar-trigger--hovered {
    transform: translateY(-12px);
    box-shadow: 0 25px 55px rgba(15, 23, 42, 0.25);
  }

  .hero-avatar {
    display: block;
    transition: transform .4s var(--ease-spring);
    will-change: transform;
  }

  .hero-avatar--spinning {
    animation: heroAvatarSpin 2.5s linear infinite;
  }

  @keyframes heroAvatarSpin {
    0% {
      transform: rotate(0deg);
    }
    20% {
      transform: rotate(120deg);
    }
    40% {
      transform: rotate(360deg);
    }
    60% {
      transform: rotate(720deg);
    }
    80% {
      transform: rotate(1200deg);
    }
    100% {
      transform: rotate(1800deg);
    }
  }

::selection {
  background-color: rgba(29, 158, 216, .2)
}

[data-theme=dark] ::selection,
[theme=dark] ::selection {
  background-color: rgba(117, 201, 255, .25)
}

::-webkit-scrollbar {
  width: .5rem;
  height: .5rem
}

::-webkit-scrollbar-thumb {
  background: rgba(110, 113, 118, .9);
  border-radius: 999px
}

::-webkit-scrollbar-thumb:hover {
  background: #8d9199
}

html {
  height: -webkit-fill-available;
}

body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  background-image:
    radial-gradient(circle at 20% 30%, rgba(var(--primary-rgb), 0.15), transparent 45%),
    radial-gradient(circle at 80% 70%, rgba(0, 255, 255, 0.12), transparent 45%),
    radial-gradient(circle at 50% 50%, rgba(255, 155, 255, 0.12), transparent 50%),
    var(--glass-noise-svg);
  background-size: 120% 120%, 130% 130%, 110% 110%, 200px 200px;
  background-repeat: no-repeat, no-repeat, no-repeat, repeat;
  animation: mesh-float 20s ease-in-out infinite;
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color .35s ease, color .35s ease;
  min-height: -webkit-fill-available;
}

[data-theme=dark] body,
[theme=dark] body {
  background-image:
    radial-gradient(circle at 20% 30%, rgba(var(--primary-rgb), 0.22), transparent 45%),
    radial-gradient(circle at 80% 70%, rgba(0, 255, 255, 0.18), transparent 45%),
    radial-gradient(circle at 50% 50%, rgba(255, 155, 255, 0.18), transparent 50%),
    var(--glass-noise-svg);
}

/* Header acrylic treatment (Fluent 2) */
.header,
.header-minimal {
  background: var(--acrylic-bg-light);
  -webkit-backdrop-filter: blur(50px) saturate(var(--acrylic-saturate));
  backdrop-filter: blur(50px) saturate(var(--acrylic-saturate));
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow-2), 0 1px 0 rgba(var(--primary-rgb), 0.1);
}

[data-theme=dark] .header,
[data-theme=dark] .header-minimal,
[theme=dark] .header,
[theme=dark] .header-minimal {
  background: var(--acrylic-bg-dark);
}

a {
  color: var(--link);
  text-decoration: none;
  text-decoration-color: transparent;
  text-underline-offset: .2em;
  transition: color .25s var(--ease-spring), text-decoration-color .25s var(--ease-spring)
}

a:hover {
  color: #0b5f93;
  text-decoration: underline;
  text-decoration-color: currentColor
}

.container {
  width: 100%;
  max-width: 69rem;
  margin-inline: auto;
  padding-inline: clamp(1rem, 4vw, 2.5rem)
}

.article-page-container {
  max-width: min(78rem, calc(var(--article-layout-width) + 4rem));
  padding-inline: clamp(1rem, 3vw, 2.25rem);
}

:root {
  --article-layout-width: 850px;
  --article-main-current-width: var(--article-layout-width);
  --article-center-gap-global: 1rem;
  --article-left-gutter-width: calc(50vw - (var(--article-main-current-width) / 2));
  --article-side-rail-width: clamp(10.75rem, 12vw, 12.25rem);
  --article-side-rail-content-width: 12.5rem;
  --article-side-rail-gap: clamp(0.9rem, 1.2vw, 1.15rem);
  --article-side-rail-top: calc(var(--header-height-desktop) + 1rem);
  --toc-side-gap: clamp(0.9rem, 1.2vw, 1.25rem);
  --toc-panel-width: min(296px, 20.4vw);
  --toc-collapsed-width: min(206px, 14.8vw);
  --toc-slideout-tab-width: 2.75rem;
  --toc-slideout-tab-height: 8.5rem;
  --toc-slideout-transition: transform 0.24s ease;
  --toc-content-gap: 0.85rem;
}

/* Desktop article TOC reservation: keep article centered, only shrink width when needed */
@media (min-width: 1281px) {
  body.has-desktop-toc.toc-mode-fixed-right {
    --article-toc-reserve-width: calc(
      var(--toc-side-gap) + var(--toc-panel-width) + var(--toc-content-gap)
    );
  }

  body.has-desktop-toc.toc-mode-fixed-right.has-desktop-toc-collapsed {
    --article-toc-reserve-width: calc(
      var(--toc-side-gap) + var(--toc-collapsed-width) + var(--toc-content-gap)
    );
  }

  body.has-desktop-toc.toc-mode-slideout {
    --article-toc-reserve-width: calc(
      var(--toc-slideout-tab-width) + var(--toc-content-gap)
    );
  }

  body.has-desktop-toc.toc-mode-slideout.toc-slideout-open {
    --article-toc-reserve-width: calc(
      var(--toc-panel-width) + var(--toc-content-gap)
    );
  }
}

.article-detail {
  --article-max-width-base: var(--article-layout-width);
  --article-body-font-size: clamp(1.03rem, 0.98rem + 0.18vw, 1.1rem);
  --article-body-line-height: 1.78;
  --article-flow-space: 1.14em;
  --article-paragraph-gap: 0.28em;
  --article-block-space-tight: 1em;
  --article-block-space: 1.3em;
  --article-block-space-wide: 1.68em;
  --article-heading-margin-top: 1.48em;
  --article-heading-margin-bottom: 0.6em;
  --article-list-margin: 0.9em;
  --article-list-item-gap: 0.28em;
  --article-block-padding-y: 0.88rem;
  --article-block-padding-x: 1.08rem;
  --article-center-safe-gap: var(--article-center-gap-global);
  width: min(100%, var(--article-max-width-base));
  max-width: var(--article-max-width-base);
  margin-inline: auto;
}

@media (min-width: 1281px) {
  body {
    --article-main-current-width: var(--article-layout-width);
  }

  body.has-desktop-toc {
    --article-main-current-width: min(
      var(--article-layout-width),
      calc(100vw - var(--article-toc-reserve-width, 0px) - (2 * var(--article-center-gap-global)))
    );
  }

  body.has-desktop-toc .article-detail {
    max-width: var(--article-main-current-width);
  }
}

@media (max-width: 768px) {
  .article-detail {
    --article-body-font-size: 1.02rem;
    --article-body-line-height: 1.74;
    --article-flow-space: 1em;
    --article-paragraph-gap: 0.26em;
    --article-block-space-tight: 0.88em;
    --article-block-space: 1.1em;
    --article-block-space-wide: 1.38em;
    --article-heading-margin-top: 1.38em;
    --article-heading-margin-bottom: 0.54em;
    --article-list-margin: 0.82em;
    --article-list-item-gap: 0.24em;
  }
}

.page-kicker {
  margin: 0 0 .35rem;
  font-size: .9rem;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--muted);
}

.page-title {
  margin: 0 0 .6rem;
  font-size: 2.25rem;
  font-weight: 700;
}

.page-description {
  margin: 0;
  color: var(--muted);
  font-size: 1rem;
  line-height: 1.7;
}

.article-inline-actions {
  display: flex;
  width: 100%;
  margin-bottom: 0.6rem;
}

.article-layout-shell {
  width: 100%;
}

.article-main-column {
  min-width: 0;
}

.article-side-actions-rail {
  display: none;
}

.article-actions-stack {
  width: 100%;
}

.article-actions-cta-row {
  width: 100%;
}

@media (min-width: 1520px) {
  .article-layout-shell--with-side-actions {
    position: relative;
  }

  .article-layout-shell--with-side-actions .article-inline-actions {
    display: none;
  }

  .article-layout-shell--with-side-actions .article-side-actions-rail {
    display: block;
    position: fixed;
    top: var(--article-side-rail-top);
    left: var(--toc-side-gap);
    width: max(
      var(--article-side-rail-width),
      calc(var(--article-left-gutter-width) - var(--toc-side-gap) - var(--article-side-rail-gap))
    );
    z-index: 22;
    pointer-events: none;
  }

  .article-layout-shell--with-side-actions .article-actions-stack-rail {
    width: min(var(--article-side-rail-content-width), 100%);
    gap: 0.46rem;
    padding-left: 0.62rem;
    position: relative;
    margin-left: auto;
    pointer-events: auto;
  }

  .article-layout-shell--with-side-actions .article-actions-stack-rail::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.36rem;
    bottom: 0.36rem;
    width: 1px;
    background: color-mix(in srgb, var(--border) 76%, transparent);
  }

  .article-layout-shell--with-side-actions .article-actions-stack-rail .article-actions-cta-row {
    flex-direction: column;
    gap: 0.46rem;
  }

  .article-layout-shell--with-side-actions .article-language-toggle {
    width: 100%;
    justify-content: center;
    gap: 0.36rem;
    padding: 0.36rem 0.42rem;
    border-radius: 999px;
    border-color: color-mix(in srgb, var(--border) 74%, transparent);
    background: color-mix(in srgb, var(--surface) 96%, transparent);
    box-shadow: none;
  }

  .article-layout-shell--with-side-actions .article-language-toggle > span {
    display: none;
  }

  .article-layout-shell--with-side-actions .article-action-btn {
    width: 100%;
    justify-content: center;
    border-color: color-mix(in srgb, var(--border) 76%, transparent);
    background: color-mix(in srgb, var(--surface) 97%, transparent);
    box-shadow: none;
    transform: none;
  }

  .article-layout-shell--with-side-actions .article-action-btn:hover {
    border-color: color-mix(in srgb, var(--primary) 36%, var(--border));
    background: color-mix(in srgb, var(--surface) 92%, rgba(var(--primary-rgb), 0.06));
    transform: none;
  }
}

[data-theme="dark"] .article-layout-shell--with-side-actions .article-actions-stack-rail::before,
[theme="dark"] .article-layout-shell--with-side-actions .article-actions-stack-rail::before {
  background: rgba(148, 163, 184, 0.28);
}

[data-theme="dark"] .article-layout-shell--with-side-actions .article-language-toggle,
[theme="dark"] .article-layout-shell--with-side-actions .article-language-toggle {
  background: color-mix(in srgb, var(--surface) 88%, rgba(var(--primary-rgb), 0.05));
  border-color: rgba(148, 163, 184, 0.32);
}

[data-theme="dark"] .article-layout-shell--with-side-actions .article-action-btn,
[theme="dark"] .article-layout-shell--with-side-actions .article-action-btn {
  background: color-mix(in srgb, var(--surface) 90%, rgba(var(--primary-rgb), 0.02));
  border-color: rgba(148, 163, 184, 0.31);
}

[data-theme="dark"] .article-layout-shell--with-side-actions .article-action-btn:hover,
[theme="dark"] .article-layout-shell--with-side-actions .article-action-btn:hover {
  border-color: rgba(var(--primary-rgb), 0.55);
  background: color-mix(in srgb, var(--surface) 84%, rgba(var(--primary-rgb), 0.11));
}

.article-content {
  color: var(--text);
  font-size: var(--article-body-font-size, 1rem);
  line-height: var(--article-body-line-height, 1.72);
  word-break: break-word;
  overflow-wrap: anywhere;
}

.article-content > * + * {
  margin-top: var(--article-flow-space, 1em);
}

.article-content > :first-child {
  margin-top: 0;
}

.article-content > :last-child {
  margin-bottom: 0;
}

.article-content img {
  display: block;
  max-width: 100%;
  height: auto;
  margin-inline: auto;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  box-shadow: var(--shadow-2);
  transition: transform 0.3s var(--ease-snap), box-shadow 0.3s var(--ease-snap), border-color 0.3s var(--ease-snap), opacity 0.5s ease;
  opacity: 0;
  background: linear-gradient(110deg, var(--surface-alt) 0%, var(--surface) 100%);
  animation: image-pulse 1.5s ease-in-out infinite;
}

@keyframes image-pulse {
  0%, 100% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
}

.article-content img.loaded {
  opacity: 1;
  animation: none;
}

.article-content img:hover {
  transform: translateY(-2px) scale(1.01);
  box-shadow: var(--shadow-4);
  border-color: var(--primary);
}

.article-content hr {
  border-color: var(--border);
}

.article-content h1,
.article-content h2,
.article-content h3,
.article-content h4,
.article-content h5,
.article-content h6 {
  margin: var(--article-heading-margin-top, 1.36em) 0 var(--article-heading-margin-bottom, 0.56em);
  font-weight: 700;
  line-height: 1.3;
}

.article-content h1 { font-size: 2.06rem; }
.article-content h2 { font-size: 1.76rem; }
.article-content h3 { font-size: 1.5rem; }
.article-content h4 { font-size: 1.3rem; }
.article-content h5 { font-size: 1.14rem; }
.article-content h6 { font-size: 1.03rem; color: var(--muted); }

.article-content > h1:first-child,
.article-content > h2:first-child,
.article-content > h3:first-child,
.article-content > h4:first-child,
.article-content > h5:first-child,
.article-content > h6:first-child {
  margin-top: 0;
}

.article-content p {
  margin: 0;
  font-size: 1em;
  color: var(--text);
}

.article-content p + p {
  margin-top: var(--article-paragraph-gap, 0.28em);
}

.article-content ul,
.article-content ol {
  margin: var(--article-list-margin, 0.82em) 0;
  padding-left: 1.45rem;
  color: var(--text);
  list-style-position: outside;
}

.article-content ul {
  list-style-type: disc;
}

.article-content ol {
  list-style-type: decimal;
}

.article-content ul ul {
  list-style-type: circle;
}

.article-content ul ul ul {
  list-style-type: square;
}

.article-content ol ol {
  list-style-type: lower-alpha;
}

.article-content ol ol ol {
  list-style-type: lower-roman;
}

.article-content li {
  margin: 0;
}

.article-content li + li {
  margin-top: var(--article-list-item-gap, 0.24em);
}

.article-content li > ul,
.article-content li > ol {
  margin-top: 0.58em;
  margin-bottom: 0.32em;
}

.article-content li::marker {
  color: var(--text);
}

@supports (color: color-mix(in srgb, red 50%, blue)) {
  .article-content li::marker {
    color: color-mix(in srgb, var(--primary) 58%, var(--text));
  }
}

.article-content li:has(> input[type="checkbox"]) {
  list-style: none;
}

.article-content li > input[type="checkbox"] {
  margin-right: 0.55rem;
  transform: translateY(1px);
  accent-color: var(--primary);
}

.article-content p + ul,
.article-content p + ol,
.article-content ul + p,
.article-content ol + p {
  margin-top: var(--article-block-space-tight, 0.92em);
}

.article-content a {
  color: var(--link);
  text-decoration: underline;
  text-decoration-color: transparent;
  transition: color .2s ease, text-decoration-color .2s ease;
}

.article-content a:hover {
  color: var(--primary);
  text-decoration-color: currentColor;
}

.article-content blockquote {
  margin: var(--article-block-space, 1.22em) 0;
  padding: var(--article-block-padding-y, 0.82rem) var(--article-block-padding-x, 1.04rem);
  border-left: 4px solid rgba(var(--primary-rgb), 0.65);
  background: linear-gradient(
    120deg,
    rgba(var(--primary-rgb), 0.08),
    rgba(255, 255, 255, 0)
  );
  color: var(--text);
  border-radius: 14px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.25), 0 10px 25px rgba(15, 23, 42, 0.08);
  position: relative;
}

.article-content blockquote::before {
  content: "\201C";
  position: absolute;
  top: -10px;
  left: 12px;
  font-size: 2.5rem;
  color: rgba(var(--primary-rgb), 0.2);
  pointer-events: none;
}

.article-content blockquote p {
  margin: 0;
  font-style: italic;
  color: var(--text);
}

.article-content blockquote > * + * {
  margin-top: 0.8em;
}

.article-content code {
  font-family: ui-monospace, SFMono-Regular, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  background: rgba(15, 23, 42, 0.06);
  color: var(--text);
  padding: 0.15em 0.35em;
  border-radius: 6px;
}

.article-content pre {
  position: relative;
  margin: var(--article-block-space, 1.22em) 0;
  padding: var(--article-block-padding-y, 0.82rem) var(--article-block-padding-x, 1.04rem);
  background: var(--surface-alt);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: auto;
  font-family: ui-monospace, SFMono-Regular, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  line-height: 1.6;
}

.article-content .sf-math-block {
  margin: var(--article-block-space, 1.22em) 0;
  padding: calc(var(--article-block-padding-y, 0.82rem) - 0.04rem) var(--article-block-padding-x, 1.04rem);
  border: 1px solid var(--border);
  border-radius: 12px;
  background: color-mix(in srgb, var(--surface-alt) 80%, var(--surface));
  line-height: 1.7;
  overflow-x: auto;
  white-space: pre-wrap;
  font-family: "Times New Roman", Georgia, serif;
}

/* Code block collapsible wrapper */
.code-block-wrapper {
  position: relative;
  margin: var(--article-block-space, 1.22em) 0;
}

.code-block-wrapper pre {
  margin: 0;
  transition: max-height 0.3s ease-out;
}

/* Collapsed state - show only ~10 lines (approx 200px) */
.code-block-wrapper.collapsed pre {
  max-height: 200px;
  overflow: hidden;
}

/* Fade gradient at bottom when collapsed */
.code-block-wrapper.collapsed::after {
  content: '';
  position: absolute;
  bottom: 40px;
  left: 0;
  right: 0;
  height: 60px;
  background: linear-gradient(to bottom, transparent, var(--surface-alt));
  pointer-events: none;
  border-radius: 0 0 12px 12px;
}

/* Toggle button */
.code-toggle-btn {
  position: absolute;
  bottom: 0.5rem;
  right: 0.5rem;
  z-index: 10;
  padding: 0.5rem 0.75rem;
  background: rgba(0, 0, 0, 0.6);
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  opacity: 0;
  backdrop-filter: blur(4px);
}

.code-block-wrapper:hover .code-toggle-btn {
  opacity: 1;
}

.code-toggle-btn:hover {
  background: rgba(0, 0, 0, 0.8);
  transform: scale(1.05);
}

.code-toggle-btn:active {
  transform: scale(0.95);
}

/* Icon in toggle button */
.code-toggle-btn i {
  font-size: 0.75rem;
  pointer-events: none;
}

/* Dark theme adaptation */
[data-theme="dark"] .code-toggle-btn {
  background: rgba(255, 255, 255, 0.1);
  color: #e5e7eb;
}

[data-theme="dark"] .code-toggle-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* Mobile: always visible */
@media (max-width: 768px) {
  .code-toggle-btn {
    opacity: 1;
    padding: 0.4rem 0.6rem;
    font-size: 0.75rem;
  }
}

.article-content img {
  max-width: 100%;
  height: auto;
  border-radius: 10px;
}

.article-content hr {
  margin: var(--article-block-space-wide, 1.58em) 0;
  border: 0;
  border-top: 1px solid var(--border);
}

.article-list-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  margin-bottom: var(--space-xl);
  position: relative;
  z-index: 10;
  margin-top: 0;
  padding-top: var(--space-lg)
}

.section-title-with-bg {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) - 4px);
  padding: 1.25rem 1.5rem;
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
  gap: .35rem;
  transition: var(--transition-base)
}

.section-title-with-bg h2 {
  margin: 0;
  font-size: 1.4rem;
  font-weight: 600
}

.section-title-with-bg p {
  margin: 0;
  color: var(--muted);
  font-size: .95rem
}

/* ========================================
   文章内容样式 (保留 - Markdown 动态生成)
   ======================================== */

.article-content .md-scroll-wrap {
  position: relative;
  width: 100%;
  max-width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  margin: var(--article-block-space-tight, 0.94em) 0;
  padding: 0 0 0.25rem;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: rgba(100, 116, 139, 0.55) transparent;
}

.article-content .md-scroll-wrap::-webkit-scrollbar {
  height: 8px;
}

.article-content .md-scroll-wrap::-webkit-scrollbar-track {
  background: transparent;
}

.article-content .md-scroll-wrap::-webkit-scrollbar-thumb {
  background: rgba(100, 116, 139, 0.48);
  border-radius: 999px;
}

.article-content .md-scroll-wrap::-webkit-scrollbar-thumb:hover {
  background: rgba(71, 85, 105, 0.68);
}

.article-content .md-table-wrap > table,
.article-content .md-math-wrap > .sf-math-block,
.article-content .md-media-wrap > img,
.article-content .md-media-wrap > a,
.article-content .md-quote-wrap > blockquote {
  margin: 0 !important;
}

.article-content .md-table-wrap > table {
  width: max-content;
  min-width: 100%;
}

.article-content .md-table-wrap th,
.article-content .md-table-wrap td {
  white-space: nowrap;
}

.article-content .md-math-wrap > .sf-math-block {
  width: max-content;
  min-width: 100%;
  max-width: none;
  white-space: nowrap;
}

.article-content .md-media-wrap {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  overflow-x: hidden;
  overflow-y: visible;
  padding-bottom: 0;
}

.article-content .md-media-wrap > img,
.article-content .md-media-wrap > a {
  flex: 0 1 auto;
  display: block;
  max-width: 100%;
  width: auto;
}

.article-content .md-media-wrap > a > img {
  max-width: 100%;
  width: auto;
  height: auto;
}

.article-content .md-quote-wrap > blockquote {
  min-width: 100%;
}

.article-content table {
  width: 100%;
  margin: var(--article-block-space, 1.22em) 0;
  border-collapse: collapse;
  overflow: hidden;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: var(--surface);
  box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
}

.article-content thead {
  background: rgba(var(--primary-rgb), 0.08);
}

.article-content th,
.article-content td {
  padding: 0.72rem 0.88rem;
  text-align: left;
  border-bottom: 1px solid var(--border);
  color: var(--text);
}

.article-content th {
  font-weight: 700;
  color: var(--text);
}

.article-content tbody tr:last-child td {
  border-bottom: none;
}

.article-content tbody tr:nth-child(2n) {
  background: rgba(var(--surface-rgb), 0.55);
}

@media (max-width: 768px) {
  .article-content .md-scroll-wrap {
    padding-bottom: 0.4rem;
  }

  .article-content .md-table-wrap > table {
    min-width: max(100%, 640px);
  }
}

[data-theme=dark] .article-content table,
[theme=dark] .article-content table {
  background: #0f172a;
  border-color: rgba(255, 255, 255, 0.08);
  box-shadow: 0 16px 32px rgba(0, 0, 0, 0.45);
}

[data-theme=dark] .article-content thead,
[theme=dark] .article-content thead {
  background: rgba(53, 179, 255, 0.12);
}

[data-theme=dark] .article-content th,
[theme=dark] .article-content th,
[data-theme=dark] .article-content td,
[theme=dark] .article-content td {
  color: #e5edff;
  border-bottom-color: rgba(255, 255, 255, 0.08);
}

[data-theme=dark] .article-content tbody tr:nth-child(2n),
[theme=dark] .article-content tbody tr:nth-child(2n) {
  background: rgba(255, 255, 255, 0.05);
}

.comment-compose-textarea {
  width: 100%;
  min-height: 124px;
  resize: vertical;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--surface);
  color: var(--text);
  padding: 0.8rem 0.95rem;
  line-height: 1.65;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.comment-compose-textarea:focus {
  border-color: color-mix(in srgb, var(--primary) 68%, var(--border));
  box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.14);
}

.comment-thread-list {
  display: flex;
  flex-direction: column;
  gap: 0.9rem;
}

.comment-thread-item {
  border: 1px solid var(--border);
  border-radius: 14px;
  background: color-mix(in srgb, var(--surface) 96%, rgba(var(--primary-rgb), 0.03));
  padding: 0.95rem;
  display: flex;
  flex-direction: column;
  gap: 0.78rem;
}

.comment-thread-head {
  display: flex;
  align-items: center;
  gap: 0.68rem;
}

.comment-avatar {
  width: 2.2rem;
  height: 2.2rem;
  border-radius: 999px;
  color: #fff;
  font-size: 0.76rem;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.18), 0 7px 14px rgba(8, 14, 28, 0.12);
}

.comment-head-meta {
  min-width: 0;
}

.comment-author-name {
  margin: 0;
  color: var(--text);
  font-size: 0.93rem;
  font-weight: 700;
}

.comment-meta-line {
  margin: 0.15rem 0 0;
  color: var(--muted);
  font-size: 0.78rem;
}

.comment-quote-card {
  border: 1px solid color-mix(in srgb, var(--border) 86%, rgba(var(--primary-rgb), 0.16));
  background: color-mix(in srgb, var(--surface-alt) 82%, rgba(var(--primary-rgb), 0.08));
  border-radius: 11px;
  padding: 0.68rem 0.78rem;
}

.comment-quote-label {
  margin: 0;
  color: var(--muted);
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.comment-quote-text {
  margin: 0.3rem 0 0;
  color: var(--text);
  font-size: 0.92rem;
  line-height: 1.62;
  white-space: pre-wrap;
}

.comment-jump-btn {
  margin-top: 0.52rem;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: var(--surface);
  color: var(--muted);
  font-size: 0.73rem;
  font-weight: 700;
  letter-spacing: 0.04em;
  padding: 0.28rem 0.68rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.comment-jump-btn:hover {
  color: var(--primary);
  border-color: color-mix(in srgb, var(--primary) 52%, var(--border));
}

.comment-user-card,
.comment-ai-card {
  border: 1px solid color-mix(in srgb, var(--border) 90%, transparent);
  border-radius: 11px;
  background: var(--surface);
  padding: 0.72rem 0.82rem;
}

.comment-section-label {
  margin: 0;
  color: var(--muted);
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.comment-user-text {
  margin: 0.38rem 0 0;
  color: var(--text);
  font-size: 0.95rem;
  line-height: 1.66;
  white-space: pre-wrap;
}

.comment-ai-markdown {
  margin-top: 0.42rem;
  font-size: 0.94rem;
  --article-flow-space: 0.94em;
  --article-paragraph-gap: 0.22em;
  --article-block-space-tight: 0.82em;
  --article-block-space: 1em;
  --article-block-space-wide: 1.22em;
  --article-heading-margin-top: 1.18em;
  --article-heading-margin-bottom: 0.48em;
  --article-list-margin: 0.74em;
  --article-list-item-gap: 0.22em;
  --article-block-padding-y: 0.62rem;
  --article-block-padding-x: 0.82rem;
  line-height: 1.64;
}

.selection-comment-fab {
  position: fixed;
  z-index: 60;
  border: 1px solid color-mix(in srgb, var(--primary) 58%, var(--border));
  border-radius: 999px;
  background: color-mix(in srgb, var(--surface) 85%, rgba(var(--primary-rgb), 0.17));
  color: var(--primary);
  font-size: 0.78rem;
  font-weight: 700;
  letter-spacing: 0.04em;
  padding: 0.5rem 0.84rem;
  display: inline-flex;
  align-items: center;
  gap: 0.38rem;
  box-shadow: var(--shadow-4);
  cursor: pointer;
  transition: transform 0.18s ease, box-shadow 0.18s ease;
}

.selection-comment-fab:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-8);
}

.selection-comment-modal {
  width: min(680px, 94vw);
  max-height: min(90vh, 760px);
  overflow: auto;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: var(--surface);
  box-shadow: var(--shadow-lg);
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.selection-comment-modal-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 0.8rem;
}

.selection-comment-modal-title {
  margin: 0;
  color: var(--text);
  font-size: 1.02rem;
  font-weight: 700;
}

.selection-comment-modal-subtitle {
  margin: 0.28rem 0 0;
  color: var(--muted);
  font-size: 0.84rem;
  line-height: 1.55;
}

.selection-comment-close {
  border: 1px solid var(--border);
  border-radius: 999px;
  background: var(--surface);
  color: var(--muted);
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  padding: 0.34rem 0.75rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.selection-comment-close:hover {
  color: var(--primary);
  border-color: color-mix(in srgb, var(--primary) 46%, var(--border));
}

.selection-comment-quote {
  border: 1px solid color-mix(in srgb, var(--border) 85%, rgba(var(--primary-rgb), 0.16));
  border-radius: 12px;
  background: color-mix(in srgb, var(--surface-alt) 85%, rgba(var(--primary-rgb), 0.09));
  padding: 0.78rem 0.82rem;
}

.selection-comment-quote-label {
  margin: 0;
  color: var(--muted);
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.selection-comment-quote-text {
  margin: 0.34rem 0 0;
  color: var(--text);
  font-size: 0.92rem;
  line-height: 1.65;
  white-space: pre-wrap;
}

.selection-comment-modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.6rem;
}

.sf-comment-anchor-flash {
  animation: sfCommentAnchorFlash 1.45s ease-out;
}

@keyframes sfCommentAnchorFlash {
  0% {
    box-shadow: 0 0 0 0 rgba(var(--primary-rgb), 0.45);
    outline: 2px solid rgba(var(--primary-rgb), 0.45);
  }
  100% {
    box-shadow: 0 0 0 18px rgba(var(--primary-rgb), 0);
    outline: 2px solid rgba(var(--primary-rgb), 0);
  }
}


.timeline {
  --timeline-offset: 1.2rem;
  position: relative;
  margin: 0 0 2.5rem;
  padding-left: calc(var(--timeline-offset) + 1.85rem)
}

.timeline::before {
  content: '';
  position: absolute;
  left: var(--timeline-offset);
  top: .25rem;
  bottom: .25rem;
  width: 2px;
  background: var(--border)
}

.circle {
  position: relative;
  padding-bottom: 1.35rem
}

.circle:last-child {
  padding-bottom: 0
}

.circle::before {
  content: '';
  position: absolute;
  left: calc(var(--timeline-offset) - .45rem);
  top: .45rem;
  width: .95rem;
  height: .95rem;
  border-radius: 50%;
  border: 2px solid var(--primary);
  background: var(--surface);
  box-shadow: 0 0 0 4px var(--bg)
}

.empty-hint {
  text-align: center;
  color: var(--muted);
  margin: 2rem 0
}

.muted {
  color: var(--muted)
}

.hidden {
  display: none !important
}

.visually-hidden {
  position: absolute !important;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 0;
  border: 0;
  height: 1px;
  width: 1px;
  overflow: hidden
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(4px)
  }

  to {
    opacity: 1;
    transform: translateY(0)
  }
}

.fade-in {
  animation: fadeIn .4s ease both
}

@keyframes spin {
  to {
    transform: rotate(360deg)
  }
}

.spin {
  animation: spin 1s linear infinite
}

@media (max-width:640px) {
  .post-meta {
    flex-direction: column;
    align-items: flex-start
  }
}

@media (min-width:1024px) {
  .container {
    max-width: 72rem
  }
}

@media (min-width:1280px) {
  .container {
    max-width: 80rem
  }
}

@media (prefers-reduced-motion:reduced) {
  * {
    animation-duration: .01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: .01ms !important;
    scroll-behavior: auto !important
  }
}

/* Pagination current page button fix */
button[aria-current="page"] {
  color: #fff !important;
}

button[aria-current="page"]:hover {
  color: #fff !important;
}

/* Mermaid 图表样式 */
.mermaid {
  padding: 1.5rem;
  text-align: center;
  background: var(--code-bg);
  border-radius: 8px;
  /* Keep horizontal overflow local; height follows content naturally. */
  overflow-x: auto;
  overflow-y: hidden;
  width: 100%;
  max-width: 100%;
}

.mermaid.mermaid-pending {
  position: relative;
  min-height: 210px;
  user-select: none;
}

.mermaid.mermaid-pending::before {
  content: "";
  position: absolute;
  top: calc(50% - 1.15rem);
  left: 50%;
  z-index: 2;
  width: 2rem;
  height: 2rem;
  margin-left: -1rem;
  border-radius: 999px;
  border: 2px solid color-mix(in srgb, var(--primary) 22%, var(--border));
  border-top-color: color-mix(in srgb, var(--primary) 76%, #22d3ee);
  animation: mermaid-loader-spin 0.92s linear infinite;
  pointer-events: none;
}

.mermaid.mermaid-pending::after {
  content: "Rendering Mermaid diagram...";
  position: absolute;
  inset: 0;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-top: 3.2rem;
  background: color-mix(in srgb, var(--code-bg) 94%, rgba(var(--primary-rgb), 0.05));
  color: var(--muted);
  font-size: 0.82rem;
  line-height: 1;
  letter-spacing: 0.02em;
  white-space: normal;
  pointer-events: none;
}

@keyframes mermaid-loader-spin {
  to {
    transform: rotate(360deg);
  }
}

.mermaid svg {
  /* Scale oversized diagrams proportionally: viewBox + auto dimensions
     let the browser shrink both axes to fit within max-width / max-height
     while preserving aspect ratio.  Fullscreen overrides separately. */
  width: auto !important;
  height: auto !important;
  max-width: 100% !important;
  max-height: 100vh !important;
  display: block;
  margin: 0 auto;
}

/* 响应式优化 */
@media (max-width: 768px) {
  .mermaid {
    padding: 1rem;
  }

  .mermaid.mermaid-pending {
    min-height: 170px;
  }

  .mermaid.mermaid-pending::after {
    font-size: 0.76rem;
  }
}

/* 确保 Mermaid 在文章内容中的间距 */
.article-content .mermaid {
  margin: 0;
}

.article-content .mermaid-wrapper {
  margin: var(--article-block-space-wide, 1.58em) 0;
}

/* 暗色主题适配 */
[data-theme="dark"] .mermaid {
  background: rgba(255, 255, 255, 0.03);
}

[data-theme="dark"] .mermaid.mermaid-pending::before,
[theme="dark"] .mermaid.mermaid-pending::before {
  border-color: rgba(148, 163, 184, 0.35);
  border-top-color: color-mix(in srgb, var(--primary) 72%, #67e8f9);
}

[data-theme="dark"] .mermaid.mermaid-pending::after,
[theme="dark"] .mermaid.mermaid-pending::after {
  color: rgba(226, 232, 240, 0.82);
}

@media (prefers-reduced-motion: reduce) {
  .mermaid.mermaid-pending::before {
    animation: none;
  }
}


/* ========================================
   代码块和图表复制按钮
   ======================================== */

/* 代码块包装器 */
.code-wrapper {
  position: relative;
  margin: var(--article-block-space, 1.22em) 0;
}

.code-wrapper pre {
  margin: 0;
}

/* Mermaid 包装器 */
.mermaid-wrapper {
  position: relative;
  margin: 2rem auto;
  width: 100%;
  max-width: 100%;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.mermaid-wrapper .mermaid {
  margin: 0;
  /* Keep scroll origin at top-left so tall diagrams don't clip their header nodes. */
  display: block;
}

/* 复制按钮通用样式 */
.copy-button {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  padding: 0.5rem 0.75rem;
  background: rgba(0, 0, 0, 0.6);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s ease;
  z-index: 10;
  opacity: 0;
  backdrop-filter: blur(4px);
}

.code-wrapper:hover .copy-button,
.mermaid-wrapper:hover .copy-button {
  opacity: 1;
}

.copy-button:hover {
  background: rgba(0, 0, 0, 0.8);
  transform: scale(1.05);
}

.copy-button:active {
  transform: scale(0.95);
}

.copy-button.copied {
  background: rgba(34, 197, 94, 0.8);
}

.copy-button i {
  pointer-events: none;
}

/* 暗色主题适配 */
[data-theme="dark"] .copy-button {
  background: rgba(255, 255, 255, 0.1);
  color: #e5e7eb;
}

[data-theme="dark"] .copy-button:hover {
  background: rgba(255, 255, 255, 0.2);
}

[data-theme="dark"] .copy-button.copied {
  background: rgba(34, 197, 94, 0.6);
}

/* 响应式优化 */
@media (max-width: 768px) {
  .copy-button {
    opacity: 1;
    padding: 0.4rem 0.6rem;
    font-size: 0.75rem;
  }
}

/* 确保代码块不会被按钮遮挡 */
.code-wrapper pre code {
  padding-right: 3rem;
}

/* 全屏按钮定位（在下载按钮旁边） */
.fullscreen-button {
  right: 3.5rem !important;
}

/* Mermaid 原文复制按钮定位（在全屏按钮旁边） */
.mermaid-source-button {
  right: 6.5rem !important;
}


/* ========================================
   Mermaid 全屏查看
   ======================================== */

/* 全屏覆盖层 */
.mermaid-fullscreen-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s ease;
  backdrop-filter: blur(8px);
  color: var(--text);
}

.mermaid-fullscreen-overlay.open {
  opacity: 1;
}

/* 全屏内容容器 */
.mermaid-fullscreen-content {
  width: min(94vw, 1500px);
  height: min(92vh, 1000px);
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1.1rem;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.14);
  transform: scale(0.96);
  transition: transform 0.3s ease;
  box-shadow: 0 20px 48px rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.mermaid-fullscreen-overlay.open .mermaid-fullscreen-content {
  transform: scale(1);
}

.mermaid-fullscreen-toolbar {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.45rem;
  flex-wrap: wrap;
}

.mermaid-fullscreen-zoom-value {
  min-width: 4.4rem;
  text-align: center;
  font-size: 0.8rem;
  font-weight: 700;
  letter-spacing: 0.03em;
  color: #f8fafc;
  background: rgba(15, 23, 42, 0.72);
  border: 1px solid rgba(148, 163, 184, 0.35);
  border-radius: 999px;
  padding: 0.35rem 0.65rem;
}

.mermaid-fullscreen-tool-btn {
  width: 2.4rem;
  height: 2.4rem;
  border: 1px solid rgba(255, 255, 255, 0.26);
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.72);
  color: #f8fafc;
  font-size: 0.95rem;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.mermaid-fullscreen-tool-btn:hover {
  background: rgba(30, 41, 59, 0.95);
  border-color: rgba(255, 255, 255, 0.52);
  transform: scale(1.04);
}

.mermaid-fullscreen-tool-btn:active {
  transform: scale(0.95);
}

.mermaid-fullscreen-tool-btn.close-btn {
  width: 2.9rem;
  color: #fca5a5;
}

.mermaid-fullscreen-viewport {
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(2, 6, 23, 0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

.mermaid-fullscreen-viewport.can-pan {
  cursor: grab;
}

.mermaid-fullscreen-viewport.is-dragging {
  cursor: grabbing;
  user-select: none;
}

.mermaid-fullscreen-canvas {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform-origin: center center;
  transform: translate(0, 0) scale(1);
  transition: transform 0.18s ease;
  will-change: transform;
}

/* 全屏查看的 Mermaid 样式 */
.mermaid-fullscreen {
  background: #ffffff !important;
  padding: 1.25rem !important;
  border-radius: 12px;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.42);
  width: max-content !important;
  max-width: none !important;
  max-height: none !important;
  overflow: visible !important;
  min-width: 320px;
  min-height: 220px;
  margin: 0 !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.mermaid-fullscreen svg {
  max-width: none !important;
  max-height: none !important;
  width: max-content !important;
  height: max-content !important;
  display: block !important;
  visibility: visible !important;
  margin: 0 !important;
}

/* 暗色主题适配 */
[data-theme="dark"] .mermaid-fullscreen {
  background: #1f2937 !important;
  box-shadow: 0 22px 52px rgba(0, 0, 0, 0.8);
}

[data-theme="dark"] .mermaid-fullscreen-content,
[theme="dark"] .mermaid-fullscreen-content {
  background: rgba(2, 6, 23, 0.6);
  border-color: rgba(148, 163, 184, 0.35);
}

/* 响应式优化 */
@media (max-width: 768px) {
  .mermaid-fullscreen-content {
    width: 96vw;
    height: 94vh;
    padding: 0.75rem;
    gap: 0.5rem;
  }

  .mermaid-fullscreen-toolbar {
    justify-content: space-between;
  }

  .mermaid-fullscreen-tool-btn {
    width: 2.2rem;
    height: 2.2rem;
    font-size: 0.88rem;
  }

  .mermaid-fullscreen-tool-btn.close-btn {
    width: 2.5rem;
  }

  .mermaid-fullscreen-zoom-value {
    min-width: 3.8rem;
    font-size: 0.75rem;
    padding: 0.3rem 0.55rem;
  }

  .mermaid-fullscreen-viewport {
    padding: 0.65rem;
  }

  .mermaid-fullscreen {
    padding: 0.8rem !important;
    min-width: 240px;
    min-height: 160px;
  }
}


/* ========================================
   文章目录（TOC）
   ======================================== */

/* 目录容器 - 桌面端右侧固定 */
.article-toc {
  position: fixed;
  box-sizing: border-box;
  top: calc(var(--header-height-desktop) + 1rem);
  right: var(--toc-side-gap);
  left: auto;
  width: var(--toc-panel-width);
  max-height: min(70vh, calc(100vh - var(--header-height-desktop) - 8.5rem));
  overflow: hidden;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-8), 0 0 14px rgba(var(--primary-rgb), 0.12), inset 0 1px 1px rgba(255, 255, 255, 0.12);
  padding: 0.75rem;
  z-index: 45;
  backdrop-filter: blur(50px) saturate(var(--acrylic-saturate));
  -webkit-backdrop-filter: blur(50px) saturate(var(--acrylic-saturate));
  transition: box-shadow 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
  display: flex;
  flex-direction: column;
}

.article-toc[data-side="left"] {
  left: var(--toc-side-gap);
  right: auto;
}

.article-toc[data-side="right"] {
  right: var(--toc-side-gap);
  left: auto;
}

.article-toc:hover {
  box-shadow: var(--shadow-8);
}

[data-theme="dark"] .article-toc,
[theme="dark"] .article-toc {
  background: var(--surface-alt);
  box-shadow: var(--shadow-8);
  border-color: var(--border);
}

.toc-slideout-tab {
  display: none;
  position: absolute;
  left: 0.25rem;
  top: 50%;
  transform: translateY(-50%);
  width: var(--toc-slideout-tab-width);
  height: var(--toc-slideout-tab-height);
  border: 1px solid var(--border);
  border-radius: 0.95rem;
  background: linear-gradient(
    180deg,
    rgba(var(--primary-rgb), 0.18),
    rgba(var(--surface-rgb), 0.92)
  );
  color: var(--text);
  cursor: pointer;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 0.35rem;
  box-shadow: var(--shadow-4);
  z-index: 2;
}

.toc-slideout-tab i {
  font-size: 0.95rem;
}

.toc-slideout-tab span {
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.06em;
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

[data-theme="dark"] .toc-slideout-tab,
[theme="dark"] .toc-slideout-tab {
  background: linear-gradient(
    180deg,
    rgba(var(--primary-rgb), 0.24),
    rgba(var(--surface-rgb), 0.88)
  );
}

/* 目录头部 */
.article-toc-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.72rem;
  padding-bottom: 0.55rem;
  border-bottom: 1px solid var(--border);
  cursor: default;
  gap: 0.75rem;
  user-select: none;
  touch-action: auto;
}

.article-toc-heading {
  display: flex;
  flex-direction: column;
  gap: 0.15rem;
}

.article-toc-title {
  margin: 0;
  font-size: 0.98rem;
  font-weight: 700;
  color: var(--text);
  letter-spacing: 0.04em;
}

.toc-header-actions {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.toc-collapse-btn,
/* 关闭按钮（仅移动端显示） */
.toc-close-btn {
  width: 2rem;
  height: 2rem;
  border: none;
  background: transparent;
  color: var(--muted);
  font-size: 1rem;
  cursor: pointer;
  border-radius: 50%;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toc-close-btn {
  display: none;
}

.toc-collapse-btn:hover,
.toc-close-btn:hover {
  background: rgba(0, 0, 0, 0.05);
  color: var(--text);
}

[data-theme="dark"] .toc-collapse-btn:hover,
[data-theme="dark"] .toc-close-btn:hover,
[theme="dark"] .toc-collapse-btn:hover,
[theme="dark"] .toc-close-btn:hover {
  background: rgba(255, 255, 255, 0.08);
}

.toc-collapse-btn i {
  transition: transform 0.2s ease;
}

.article-toc.collapsed {
  width: var(--toc-collapsed-width);
  max-height: none;
  overflow: hidden;
}

.article-toc.collapsed .article-toc-list {
  display: none;
}

.article-toc-list {
  list-style: none;
  margin: 0;
  padding: 0;
  padding-bottom: 0.2rem;
  overflow-y: auto;
  overflow-x: hidden;
  flex: 1 1 auto;
  min-height: 0;
  scrollbar-gutter: stable;
}

.toc-item {
  margin: 0;
  line-height: 1.38;
}

/* 层级缩进 */
.toc-level-1 { padding-left: 0; }
.toc-level-2 { padding-left: 0.6rem; }
.toc-level-3 { padding-left: 1.2rem; }
.toc-level-4 { padding-left: 1.8rem; }
.toc-level-5 { padding-left: 2.4rem; }
.toc-level-6 { padding-left: 3rem; }

.toc-link {
  display: block;
  padding: 0.36rem 0.58rem;
  margin: 0.16rem 0;
  color: var(--muted);
  font-size: 0.88rem;
  text-decoration: none;
  border-radius: 6px;
  transition: all 0.2s ease;
  border-left: 2px solid transparent;
}

.toc-link:hover {
  color: var(--primary);
  background: rgba(0, 0, 0, 0.03);
  border-left-color: var(--primary);
  transform: translateX(2px);
}

[data-theme="dark"] .toc-link:hover,
[theme="dark"] .toc-link:hover {
  background: rgba(255, 255, 255, 0.05);
}

.toc-link.active {
  color: var(--primary);
  font-weight: 600;
  background: rgba(29, 158, 216, 0.08);
  border-left-color: var(--primary);
}

[data-theme="dark"] .toc-link.active,
[theme="dark"] .toc-link.active {
  background: rgba(53, 179, 255, 0.12);
}

@media (min-width: 1281px) {
  body.toc-mode-fixed-right .article-toc {
    right: var(--toc-side-gap);
    left: auto;
    transform: none;
  }

  body.toc-mode-fixed-right .toc-close-btn {
    display: none;
  }
}

@media (min-width: 2560px) {
  body.toc-mode-slideout .article-toc {
    right: 0;
    left: auto;
    overflow: visible;
    transform: translateX(calc(100% - var(--toc-slideout-tab-width)));
    transition: var(--toc-slideout-transition), box-shadow 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;
  }

  body.toc-mode-slideout .article-toc.slideout-open,
  body.toc-mode-slideout.toc-slideout-open .article-toc {
    transform: translateX(0);
  }

  body.toc-mode-slideout .toc-slideout-tab {
    display: inline-flex;
  }

  body.toc-mode-slideout .toc-collapse-btn {
    display: none;
  }

  body.toc-mode-slideout .toc-close-btn {
    display: flex;
  }

  body.toc-mode-slideout .article-toc.collapsed {
    width: var(--toc-panel-width);
    max-height: min(70vh, calc(100vh - var(--header-height-desktop) - 8.5rem));
  }

  body.toc-mode-slideout .article-toc.collapsed .article-toc-list {
    display: block;
  }
}

/* 滚动条样式 */
.article-toc::-webkit-scrollbar {
  width: 4px;
}

.article-toc::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.article-toc::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* 移动端目录切换按钮 - 已迁移到 Tailwind (toc_button.rs) */

/* 移动端样式 */
@media (max-width: 1280px) {

  /* 目录改为抽屉式 */
  .article-toc,
  .article-toc[data-side="left"],
  .article-toc[data-side="right"] {
    position: fixed;
    top: 0;
    right: auto;
    left: 0;
    bottom: 0;
    width: 85vw;
    max-width: 320px;
    max-height: 100vh;
    border-radius: 0;
    border: none;
    border-right: 1px solid var(--border);
    padding: 1.5rem;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    z-index: 70;
    backdrop-filter: none;
    overflow: hidden;
  }

  .article-toc.mobile-open {
    transform: translateX(0);
  }

  .toc-slideout-tab {
    display: none !important;
  }

  /* 显示关闭按钮 */
  .toc-close-btn {
    display: flex;
  }

  .toc-collapse-btn {
    display: none;
  }

  .article-toc.collapsed {
    width: 85vw;
    max-width: 320px;
    max-height: 100vh;
    overflow: hidden;
  }

  .article-toc.collapsed .article-toc-list {
    display: block;
  }

  /* 标题样式调整 */
  .article-toc-title {
    font-size: 1.1rem;
  }

  .toc-drag-hint {
    display: none;
  }
}

@media (max-width: 768px) {
  .article-toc {
    width: 90vw;
    padding: 1.25rem;
  }
}

/* 移动端目录悬浮按钮显示控制（对应 Yew TocButton 类名） */
.mobile-toc-fab {
  display: none;
}

@media (max-width: 1280px) {
  .mobile-toc-fab {
    display: flex;
  }
}


/* ========================================
   回到顶部按钮 - 已迁移到 Tailwind (scroll_to_top_button.rs)
   ======================================== */

/* ============================================
   搜索页面样式 - 已迁移到 Tailwind (search.rs)
   ============================================ */

/* 回到顶部按钮 - 已迁移到 Tailwind (scroll_to_top_button.rs) */

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px)
  }
  to {
    opacity: 1;
    transform: translateY(0)
  }
}

/* ==========================================
   Category Detail Page - Geometric Design
   ========================================== */

.category-detail-page {
  animation: fadeIn 0.6s ease-out;
}

/* Category Title - Bold and structured */
.category-title {
  font-family: 'Fraunces', serif;
  font-optical-sizing: auto;
  letter-spacing: -0.025em;
  background: linear-gradient(
    135deg,
    var(--primary) 0%,
    #0891b2 50%,
    var(--primary) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: slideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
  text-shadow: 0 2px 10px rgba(var(--primary-rgb), 0.1);
}

/* Category Badge with blue colors */
.category-badge {
  animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
  box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.2);
}

/* Decorative brackets animation */
.category-brackets > div {
  animation: expandWidth 0.8s ease-out 0.4s both;
}

.category-brackets > div:nth-child(2) {
  animation: pulse 2s ease-in-out 0.6s infinite;
}

@keyframes expandWidth {
  from {
    width: 0;
    opacity: 0;
  }
  to {
    width: 3rem;
    opacity: 1;
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.3);
    opacity: 0.7;
  }
}

/* Category Timeline */
.category-timeline {
  animation: fadeInUp 0.8s ease-out 0.3s both;
}

/* Year Header Geometric Style */
.year-header-geometric {
  position: relative;
}

.year-header-geometric::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    rgba(var(--primary-rgb), 0.3) 0%,
    rgba(8, 145, 178, 0.3) 50%,
    transparent 100%
  );
}

/* Year Badge Geometric with corner accent */
.year-badge-geometric {
  font-family: 'Fraunces', serif;
  font-weight: 700;
  animation: slideInLeft 0.6s ease-out both;
  transform-origin: left center;
}

.year-badge-geometric:hover {
  transform: scale(1.05);
  transition: transform 0.3s ease;
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Category Card with left border accent */
.category-card {
  display: block;
  text-decoration: none;
  color: inherit;
}

.category-card article {
  position: relative;
  overflow: visible;
}

/* Enhanced border glow effect on hover */
.category-card:hover article {
  box-shadow:
    0 10px 40px rgba(var(--primary-rgb), 0.15),
    -4px 0 20px rgba(var(--primary-rgb), 0.1);
}

/* Category Card Title */
.category-card-title {
  font-family: 'Fraunces', serif;
  letter-spacing: -0.015em;
  line-height: 1.3;
}

/* Stagger animation for cards */
.articles-grid > * {
  animation: fadeInCard 0.5s ease-out both;
}

.articles-grid > *:nth-child(1) { animation-delay: 0.1s; }
.articles-grid > *:nth-child(2) { animation-delay: 0.2s; }
.articles-grid > *:nth-child(3) { animation-delay: 0.3s; }
.articles-grid > *:nth-child(4) { animation-delay: 0.4s; }
.articles-grid > *:nth-child(5) { animation-delay: 0.5s; }

@keyframes fadeInCard {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Dark Theme Adjustments for Category Pages */
[data-theme="dark"] .category-title {
  background: linear-gradient(
    135deg,
    #3aa0ff 0%,
    #0891b2 50%,
    #3aa0ff 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme="dark"] .category-badge {
  background: linear-gradient(
    90deg,
    rgba(58, 160, 255, 0.15),
    rgba(8, 145, 178, 0.15)
  );
  border-color: rgba(58, 160, 255, 0.4);
  box-shadow: 0 4px 16px rgba(58, 160, 255, 0.2);
}

[data-theme="dark"] .category-card article {
  background-color: rgba(var(--surface-rgb), 0.05);
  backdrop-filter: blur(20px);
  border-left-color: rgba(58, 160, 255, 0.5);
}

[data-theme="dark"] .category-card:hover article {
  background-color: rgba(var(--surface-rgb), 0.08);
  border-left-color: #3aa0ff;
  box-shadow:
    0 10px 40px rgba(58, 160, 255, 0.2),
    -4px 0 30px rgba(58, 160, 255, 0.15);
}

[data-theme="dark"] .year-badge-geometric {
  background: linear-gradient(
    135deg,
    rgba(58, 160, 255, 0.1),
    rgba(8, 145, 178, 0.1)
  );
  border-left-color: #3aa0ff;
  box-shadow: 0 4px 20px rgba(58, 160, 255, 0.2);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .category-title {
    font-size: 2.5rem;
  }

  .year-badge-geometric span {
    font-size: 1.75rem;
  }

  .category-card-title {
    font-size: 1.25rem;
  }

  .category-brackets {
    gap: 1.5rem;
  }

  .category-brackets > div:first-child,
  .category-brackets > div:last-child {
    width: 2rem;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .category-detail-page,
  .category-title,
  .category-badge,
  .category-brackets > div,
  .category-timeline,
  .year-badge-geometric,
  .articles-grid > *,
  .category-card:hover article {
    animation: none !important;
    transition: none !important;
  }

  .category-brackets > div:nth-child(2) {
    animation: none !important;
  }
}

/* ==========================================
   Responsive Display Helpers (avoid !important conflicts)
   ========================================== */

/* Desktop only - hidden on mobile, flex on desktop */
.desktop-header {
  display: none;
}

@media (min-width: 48rem) {
  .desktop-header {
    display: flex;
  }
}

/* Mobile only - flex on mobile, hidden on desktop */
.mobile-header {
  display: flex;
}

@media (min-width: 48rem) {
  .mobile-header {
    display: none;
  }
}

/* ==========================================
   Icon & Tooltip System - Technical Refinement
   ========================================== */

}

/* ==========================================
   Tags Index Page - Editorial Design
   ========================================== */

/* Tag pill stagger animation */
.tag-pill {
  animation: fadeInUp 0.5s ease-out both;
  will-change: transform, opacity;
}

/* Tag cloud hover effects enhancement */
.tag-cloud .tag-pill {
  position: relative;
  overflow: hidden;
}

.tag-cloud .tag-pill::before {
  content: '';
  position: absolute;
  inset: -2px;
  background: linear-gradient(
    135deg,
    rgba(var(--primary-rgb), 0.15),
    rgba(138, 43, 226, 0.08)
  );
  border-radius: inherit;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.tag-cloud .tag-pill:hover::before {
  opacity: 1;
}

/* Tag badge animations */
.tag-badge > div {
  animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.tag-badge > div:nth-child(1) {
  animation-delay: 0.3s;
}

.tag-badge > div:nth-child(2) {
  animation-delay: 0.4s;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .tag-cloud {
    gap: 0.5rem;
  }

  .tag-pill {
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
  }
}

/* Dark theme enhancements */
[data-theme="dark"] .tag-pill,
[theme="dark"] .tag-pill {
  background-color: rgba(var(--surface-rgb), 0.05);
  backdrop-filter: blur(20px);
}

[data-theme="dark"] .tag-pill:hover,
[theme="dark"] .tag-pill:hover {
  background-color: rgba(var(--surface-rgb), 0.08);
  box-shadow:
    var(--shadow-8),
    0 0 30px rgba(var(--primary-rgb), 0.15);
}

/* ==========================================
   Tag Detail Page - Editorial Design
   ========================================== */

.tag-detail-page {
  animation: fadeIn 0.6s ease-out;
}

/* Editorial Posts Page - Stagger Grid Animation */
.editorial-timeline .timeline-year-section {
  animation: fadeInSection 0.6s ease-out both;
}

.editorial-timeline .timeline-year-section:nth-child(1) { animation-delay: 0.1s; }
.editorial-timeline .timeline-year-section:nth-child(2) { animation-delay: 0.2s; }
.editorial-timeline .timeline-year-section:nth-child(3) { animation-delay: 0.3s; }
.editorial-timeline .timeline-year-section:nth-child(4) { animation-delay: 0.4s; }
.editorial-timeline .timeline-year-section:nth-child(5) { animation-delay: 0.5s; }

/* Stagger article cards within each year */
.articles-grid > * {
  animation: fadeInCard 0.5s ease-out both;
}

.articles-grid > *:nth-child(1) { animation-delay: 0.05s; }
.articles-grid > *:nth-child(2) { animation-delay: 0.1s; }
.articles-grid > *:nth-child(3) { animation-delay: 0.15s; }
.articles-grid > *:nth-child(4) { animation-delay: 0.2s; }
.articles-grid > *:nth-child(5) { animation-delay: 0.25s; }
.articles-grid > *:nth-child(6) { animation-delay: 0.3s; }
.articles-grid > *:nth-child(7) { animation-delay: 0.35s; }
.articles-grid > *:nth-child(8) { animation-delay: 0.4s; }
.articles-grid > *:nth-child(9) { animation-delay: 0.45s; }
.articles-grid > *:nth-child(10) { animation-delay: 0.5s; }
.articles-grid > *:nth-child(11) { animation-delay: 0.55s; }
.articles-grid > *:nth-child(12) { animation-delay: 0.6s; }

/* Editorial Card - 编辑性杂志卡片 */
.editorial-card {
  position: relative;
  will-change: transform, box-shadow, border-color;
}

/* Subtle glow on hover */
.editorial-card:hover {
  box-shadow: var(--shadow-8), 0 0 0 1px rgba(var(--primary-rgb), 0.2);
}

/* Image zoom effect */
.editorial-card img {
  will-change: transform;
}

@keyframes fadeInSection {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInCard {
  from {
    opacity: 0;
    transform: translateY(15px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Tag Title - Use Fraunces font for editorial feel */
.tag-title {
  font-family: 'Fraunces', serif;
  font-optical-sizing: auto;
  letter-spacing: -0.02em;
  background: linear-gradient(
    135deg,
    var(--text) 0%,
    var(--primary) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: slideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Tag Badge Animation */
.tag-badge {
  animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Editorial Timeline */
.editorial-timeline {
  animation: fadeInUp 0.8s ease-out 0.3s both;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Year Section Stagger Animation */
.timeline-year-section {
  animation: fadeInSection 0.6s ease-out both;
}

.timeline-year-section:nth-child(1) { animation-delay: 0.4s; }
.timeline-year-section:nth-child(2) { animation-delay: 0.5s; }
.timeline-year-section:nth-child(3) { animation-delay: 0.6s; }
.timeline-year-section:nth-child(4) { animation-delay: 0.7s; }
.timeline-year-section:nth-child(5) { animation-delay: 0.8s; }

@keyframes fadeInSection {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Year Label Enhancement */
.year-label {
  font-family: 'Fraunces', serif;
  font-weight: 700;
  position: relative;
  overflow: hidden;
}

.year-label::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(var(--primary-rgb), 0.2),
    transparent
  );
  animation: shimmer 3s infinite;
}

@keyframes shimmer {
  0% {
    left: -100%;
  }
  50%, 100% {
    left: 100%;
  }
}

/* Article Card Editorial Styling */
.article-card-editorial {
  display: block;
  text-decoration: none;
  color: inherit;
}

.article-card-editorial article {
  position: relative;
  overflow: hidden;
}

/* Glassmorphism Enhancement */
.article-card-editorial article::after {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    rgba(var(--primary-rgb), 0.1),
    rgba(138, 43, 226, 0.05)
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: -1;
}

.article-card-editorial:hover article::after {
  opacity: 1;
}

/* Article Title in Cards */
.article-card-title {
  font-family: 'Fraunces', serif;
  letter-spacing: -0.015em;
  line-height: 1.3;
}

/* Empty State */
.empty-state {
  backdrop-filter: blur(10px);
}

/* Dark Theme Adjustments */
[data-theme="dark"] .tag-title {
  background: linear-gradient(
    135deg,
    var(--text) 0%,
    #58a6ff 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme="dark"] .year-label::after {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(88, 166, 255, 0.15),
    transparent
  );
}

[data-theme="dark"] .article-card-editorial article {
  background-color: rgba(var(--surface-rgb), 0.05);
  backdrop-filter: blur(20px);
}

[data-theme="dark"] .article-card-editorial:hover article {
  background-color: rgba(var(--surface-rgb), 0.08);
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.3),
    0 0 40px rgba(var(--primary-rgb), 0.1);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .tag-title {
    font-size: 2.5rem;
  }
  
  .year-label {
    font-size: 1.75rem;
  }
  
  .article-card-title {
    font-size: 1.25rem;
  }
}

/* Smooth Scroll Behavior */
html {
  scroll-behavior: smooth;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .tag-detail-page,
  .tag-title,
  .tag-badge,
  .editorial-timeline,
  .timeline-year-section,
  .year-label::after,
  .article-card-editorial article {
    animation: none !important;
    transition: none !important;
  }
}

/* ==========================================
   Category Detail Page - Geometric Design
   ========================================== */

.category-detail-page {
  animation: fadeIn 0.6s ease-out;
}

/* Category Title - Bold and structured */
.category-title {
  font-family: 'Fraunces', serif;
  font-optical-sizing: auto;
  letter-spacing: -0.025em;
  background: linear-gradient(
    135deg,
    var(--primary) 0%,
    #0891b2 50%,
    var(--primary) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: slideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
  text-shadow: 0 2px 10px rgba(var(--primary-rgb), 0.1);
}

/* Category Badge with blue colors */
.category-badge {
  animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
  box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.2);
}

/* Decorative brackets animation */
.category-brackets > div {
  animation: expandWidth 0.8s ease-out 0.4s both;
}

.category-brackets > div:nth-child(2) {
  animation: pulse 2s ease-in-out 0.6s infinite;
}

@keyframes expandWidth {
  from {
    width: 0;
    opacity: 0;
  }
  to {
    width: 3rem;
    opacity: 1;
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.3);
    opacity: 0.7;
  }
}

/* Category Timeline */
.category-timeline {
  animation: fadeInUp 0.8s ease-out 0.3s both;
}

/* Year Header Geometric Style */
.year-header-geometric {
  position: relative;
}

.year-header-geometric::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    rgba(var(--primary-rgb), 0.3) 0%,
    rgba(8, 145, 178, 0.3) 50%,
    transparent 100%
  );
}

/* Year Badge Geometric with corner accent */
.year-badge-geometric {
  font-family: 'Fraunces', serif;
  font-weight: 700;
  animation: slideInLeft 0.6s ease-out both;
  transform-origin: left center;
}

.year-badge-geometric:hover {
  transform: scale(1.05);
  transition: transform 0.3s ease;
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Category Card with left border accent */
.category-card {
  display: block;
  text-decoration: none;
  color: inherit;
}

.category-card article {
  position: relative;
  overflow: visible;
}

/* Enhanced border glow effect on hover */
.category-card:hover article {
  box-shadow:
    0 10px 40px rgba(var(--primary-rgb), 0.15),
    -4px 0 20px rgba(var(--primary-rgb), 0.1);
}

/* Category Card Title */
.category-card-title {
  font-family: 'Fraunces', serif;
  letter-spacing: -0.015em;
  line-height: 1.3;
}

/* Stagger animation for cards */
.articles-grid > * {
  animation: fadeInCard 0.5s ease-out both;
}

.articles-grid > *:nth-child(1) { animation-delay: 0.1s; }
.articles-grid > *:nth-child(2) { animation-delay: 0.2s; }
.articles-grid > *:nth-child(3) { animation-delay: 0.3s; }
.articles-grid > *:nth-child(4) { animation-delay: 0.4s; }
.articles-grid > *:nth-child(5) { animation-delay: 0.5s; }

@keyframes fadeInCard {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Dark Theme Adjustments for Category Pages */
[data-theme="dark"] .category-title {
  background: linear-gradient(
    135deg,
    #3aa0ff 0%,
    #0891b2 50%,
    #3aa0ff 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme="dark"] .category-badge {
  background: linear-gradient(
    90deg,
    rgba(58, 160, 255, 0.15),
    rgba(8, 145, 178, 0.15)
  );
  border-color: rgba(58, 160, 255, 0.4);
  box-shadow: 0 4px 16px rgba(58, 160, 255, 0.2);
}

[data-theme="dark"] .category-card article {
  background-color: rgba(var(--surface-rgb), 0.05);
  backdrop-filter: blur(20px);
  border-left-color: rgba(58, 160, 255, 0.5);
}

[data-theme="dark"] .category-card:hover article {
  background-color: rgba(var(--surface-rgb), 0.08);
  border-left-color: #3aa0ff;
  box-shadow:
    0 10px 40px rgba(58, 160, 255, 0.2),
    -4px 0 30px rgba(58, 160, 255, 0.15);
}

[data-theme="dark"] .year-badge-geometric {
  background: linear-gradient(
    135deg,
    rgba(58, 160, 255, 0.1),
    rgba(8, 145, 178, 0.1)
  );
  border-left-color: #3aa0ff;
  box-shadow: 0 4px 20px rgba(58, 160, 255, 0.2);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .category-title {
    font-size: 2.5rem;
  }
  
  .year-badge-geometric span {
    font-size: 1.75rem;
  }
  
  .category-card-title {
    font-size: 1.25rem;
  }
  
  .category-brackets {
    gap: 1.5rem;
  }
  
  .category-brackets > div:first-child,
  .category-brackets > div:last-child {
    width: 2rem;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .category-detail-page,
  .category-title,
  .category-badge,
  .category-brackets > div,
  .category-timeline,
  .year-badge-geometric,
  .articles-grid > *,
  .category-card:hover article {
    animation: none !important;
    transition: none !important;
  }

  .category-brackets > div:nth-child(2) {
    animation: none !important;
  }
}

/* ==========================================
   Search Page - Digital Archive Style
   ========================================== */

/* Import Space Mono font */
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap');

.search-page {
  animation: fadeIn 0.6s ease-out;
  position: relative;
}

/* Animated scanline overlay */
.search-scanline {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(var(--primary-rgb), 0.4) 50%,
    transparent 100%
  );
  animation: scanline 6s ease-in-out infinite;
  pointer-events: none;
  z-index: 1;
  opacity: 0.7;
}

@keyframes scanline {
  0% {
    transform: translateY(0);
    opacity: 0;
  }
  5% {
    opacity: 0.7;
  }
  50% {
    opacity: 0.7;
  }
  95% {
    opacity: 0.7;
  }
  100% {
    transform: translateY(500px);
    opacity: 0;
  }
}

/* Search title with softer gradient */
.search-title {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, var(--primary) 80%, transparent) 0%,
    color-mix(in srgb, #0891b2 80%, transparent) 50%,
    color-mix(in srgb, var(--primary) 80%, transparent) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: slideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.search-title-glitch {
  position: relative;
  display: inline-block;
}

.search-title-glitch::before,
.search-title-glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    135deg,
    var(--primary) 0%,
    #22d3ee 50%,
    var(--primary) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  opacity: 0;
}

.search-title-glitch::before {
  animation: glitch 3s infinite;
  clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
  transform: translate(-2px, -2px);
}

.search-title-glitch::after {
  animation: glitch 2.5s infinite reverse;
  clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
  transform: translate(2px, 2px);
}

@keyframes glitch {
  0% {
    opacity: 0;
  }
  2% {
    opacity: 1;
    transform: translate(-2px, 3px);
  }
  4% {
    opacity: 0;
    transform: translate(0, 0);
  }
  100% {
    opacity: 0;
  }
}

/* Status animations */
.search-status-loading {
  color: var(--primary);
  animation: pulse 2s ease-in-out infinite;
}

.search-status-found {
  color: #0891b2;
  font-weight: 600;
  opacity: 0.85;
}

/* Tech lines animation */
.search-line-left,
.search-line-right {
  animation: lineGlow 2s ease-in-out infinite;
}

.search-line-right {
  animation-delay: 1s;
}

@keyframes lineGlow {
  0%, 100% {
    opacity: 0.5;
    box-shadow: 0 0 5px rgba(var(--primary-rgb), 0.3);
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.6);
  }
}

/* Search badge */
.search-badge {
  animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
  box-shadow: 0 4px 12px rgba(var(--primary-rgb), 0.2);
  transition: all 0.3s ease;
}

.search-badge:hover {
  box-shadow: 0 8px 24px rgba(var(--primary-rgb), 0.3);
  border-color: rgba(var(--primary-rgb), 0.5);
}

/* Search result wrapper - staggered entrance */
.search-result-wrapper {
  animation: slideInFromLeft 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

@keyframes slideInFromLeft {
  0% {
    opacity: 0;
    transform: translateX(-40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Search result card */
.search-result-card {
  position: relative;
  overflow: visible;
  background: rgba(var(--surface-rgb), 0.8);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* Neon glow corner accent */
.search-result-corner {
  position: absolute;
  top: -1px;
  right: -1px;
  width: 80px;
  height: 80px;
  background: radial-gradient(
    circle at top right,
    rgba(var(--primary-rgb), 0.3) 0%,
    transparent 70%
  );
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 0 12px 0 0;
}

.search-result-card:hover .search-result-corner {
  opacity: 1;
}

/* Empty state */
.search-empty {
  animation: fadeIn 0.6s ease-out;
  background: rgba(var(--surface-rgb), 0.6);
  backdrop-filter: blur(30px);
  -webkit-backdrop-filter: blur(30px);
}

/* Dark Theme Adjustments */
[data-theme="dark"] .search-title,
[theme="dark"] .search-title {
  background: linear-gradient(
    135deg,
    color-mix(in srgb, #3aa0ff 85%, transparent) 0%,
    color-mix(in srgb, #0891b2 85%, transparent) 50%,
    color-mix(in srgb, #3aa0ff 85%, transparent) 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme="dark"] .search-status-found,
[theme="dark"] .search-status-found {
  color: #0e7490;
  opacity: 0.7;
}

[data-theme="dark"] .search-title-glitch::before,
[data-theme="dark"] .search-title-glitch::after,
[theme="dark"] .search-title-glitch::before,
[theme="dark"] .search-title-glitch::after {
  background: linear-gradient(
    135deg,
    #3aa0ff 0%,
    #22d3ee 50%,
    #3aa0ff 100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

[data-theme="dark"] .search-result-card,
[theme="dark"] .search-result-card {
  background: rgba(var(--surface-rgb), 0.3);
  border-color: rgba(var(--primary-rgb), 0.3);
}

[data-theme="dark"] .search-result-card:hover,
[theme="dark"] .search-result-card:hover {
  background: rgba(var(--surface-rgb), 0.4);
  border-color: rgba(var(--primary-rgb), 0.6);
  box-shadow:
    0 8px 24px rgba(var(--primary-rgb), 0.3),
    0 0 40px rgba(var(--primary-rgb), 0.2),
    inset 0 0 20px rgba(var(--primary-rgb), 0.1);
}

[data-theme="dark"] .search-empty,
[theme="dark"] .search-empty {
  background: rgba(var(--surface-rgb), 0.4);
  border-color: rgba(var(--primary-rgb), 0.4);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .search-title {
    font-size: 2.5rem;
  }

  .search-tech-lines {
    gap: 1rem;
  }

  .search-line-left,
  .search-line-right {
    width: 3rem;
  }

  .search-badge {
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .search-page,
  .search-title,
  .search-badge,
  .search-result-wrapper,
  .search-empty,
  .search-scanline,
  .search-line-left,
  .search-line-right,
  .search-status-loading {
    animation: none !important;
    transition: none !important;
  }

  .search-title-glitch::before,
  .search-title-glitch::after {
    animation: none !important;
    opacity: 0 !important;
  }

  .search-result-card:hover {
    transform: none !important;
  }
}

/* ── Music Search Hero ── */
.music-search-hero {
  position: relative;
  border-radius: var(--radius-lg);
  background: linear-gradient(
    135deg,
    rgba(var(--surface-rgb), 0.95),
    rgba(var(--surface-rgb), 0.88)
  );
  overflow: hidden;
  transform: translateZ(0);
  isolation: isolate;
  animation: search-hero-glow 4s ease-in-out infinite;
  margin-bottom: 1.5rem;
}

.music-search-hero::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: conic-gradient(
    from var(--search-hero-angle, 0deg),
    #58a6ff, #8b5cf6, #f472b6, #38bdf8, #58a6ff
  );
  animation: search-hero-rotate 4s linear infinite;
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  padding: 1.5px;
  pointer-events: none;
  z-index: -1;
}

.music-search-hero::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    105deg,
    transparent 40%,
    rgba(var(--primary-rgb), 0.06) 45%,
    rgba(var(--primary-rgb), 0.10) 50%,
    rgba(var(--primary-rgb), 0.06) 55%,
    transparent 60%
  );
  background-size: 250% 100%;
  animation: search-hero-shimmer 8s var(--ease-snap) infinite;
  pointer-events: none;
  z-index: 0;
}

.music-search-hero.focused {
  animation: search-hero-glow-hover 2.5s ease-in-out infinite;
}

.music-search-hero.focused::before {
  animation-duration: 2.5s;
}

.music-search-hero.focused::after {
  animation-duration: 5s;
}

[data-theme="dark"] .music-search-hero,
[theme="dark"] .music-search-hero {
  background: linear-gradient(
    135deg,
    rgba(var(--surface-rgb), 0.92),
    rgba(var(--surface-rgb), 0.82)
  );
  animation: search-hero-glow-dark 4s ease-in-out infinite;
}

[data-theme="dark"] .music-search-hero.focused,
[theme="dark"] .music-search-hero.focused {
  animation: search-hero-glow-dark-hover 2.5s ease-in-out infinite;
}

.music-search-hero-inner {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.875rem 1.25rem;
}

.music-search-icon {
  color: var(--primary);
  opacity: 0.6;
  font-size: 1.15rem;
  flex-shrink: 0;
}

.music-search-input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-size: 1.125rem;
  color: var(--text);
  font-family: var(--font-sans);
}

.music-search-input::placeholder {
  color: var(--muted);
}

.music-search-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 50%;
  border: none;
  background: var(--primary);
  color: #fff;
  cursor: pointer;
  flex-shrink: 0;
  transition: transform 0.2s var(--ease-snap), background 0.2s ease;
}

.music-search-btn:hover {
  transform: scale(1.08);
  filter: brightness(1.1);
}

.music-search-btn:active {
  transform: scale(0.96);
}

@media (max-width: 640px) {
  .music-search-hero-inner {
    padding: 0.625rem 0.875rem;
    gap: 0.5rem;
  }
  .music-search-input {
    font-size: 1rem;
  }
  .music-search-btn {
    width: 2rem;
    height: 2rem;
  }
}
