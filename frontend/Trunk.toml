# Trunk configuration for StaticFlow frontend

# Build settings
target = "index.html"
dist = "dist"
# For GitHub Pages subpath deployment: https://acking-you.github.io/static_flow/
# For local dev, use: trunk serve --public-url /
public_url = "/static_flow/"
filehash = true
release = true

[serve]
port = 8080
open = false
# Note: DO NOT set public_url here, as it may override the build setting
# Use --public-url / flag when running trunk serve for local development

# API proxy to backend server
[[proxy]]
backend = "http://localhost:3000/api"

[[hooks]]
stage = "pre_build"
command = "npx"
command_arguments = ["@tailwindcss/cli", "-i", "input.css", "-o", "static/styles.css", "--minify"]

[[hooks]]
stage = "post_build"
command = "sh"
command_arguments = ["optimize-wasm.sh"]
